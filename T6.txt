>>>components/dashboard/ContractsView.tsx
"use client";

import * as motion from "motion/react-client";
import { useState, useEffect } from "react";
import {
  FileText,
  Calendar,
  DollarSign,
  Clock,
  AlertTriangle,
  CheckCircle,
  Building2,
  Filter,
  Search,
  MoreVertical,
  TrendingUp,
  Globe,
  Eye,
  Download,
  Edit,
  ChevronLeft,
  ChevronRight,
} from "lucide-react";
import { loadContractData, ContractData } from "@/lib/dataLoader";

// Remove static data - we'll load from Excel

const getStatusColor = (status: string) => {
  const normalizedStatus = status.toLowerCase();
  switch (normalizedStatus) {
    case "active":
      return "bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";
    case "pending":
    case "in progress":
      return "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";
    case "expired":
    case "canceled":
    case "cancelled":
      return "bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";
    case "renewed":
    case "completed":
      return "bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";
    default:
      return "bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";
  }
};

const getStatusIcon = (status: string) => {
  const normalizedStatus = status.toLowerCase();
  switch (normalizedStatus) {
    case "active":
      return <CheckCircle className="w-4 h-4" />;
    case "pending":
    case "in progress":
      return <Clock className="w-4 h-4" />;
    case "expired":
    case "canceled":
    case "cancelled":
      return <AlertTriangle className="w-4 h-4" />;
    case "renewed":
    case "completed":
      return <TrendingUp className="w-4 h-4" />;
    default:
      return <FileText className="w-4 h-4" />;
  }
};

export default function ContractsView() {
  const [searchTerm, setSearchTerm] = useState("");
  const [selectedFilter, setSelectedFilter] = useState("all");
  const [hoveredContract, setHoveredContract] = useState<string | null>(null);
  const [contractsData, setContractsData] = useState<ContractData[]>([]);
  const [loading, setLoading] = useState(true);
  const [currentPage, setCurrentPage] = useState(1);

  const contractsPerPage = 6; // 2 rows × 3 cards = 6 contracts per page

  useEffect(() => {
    const loadData = async () => {
      try {
        const data = await loadContractData();
        setContractsData(data);
      } catch (error) {
        console.error("Failed to load contract data:", error);
      } finally {
        setLoading(false);
      }
    };

    loadData();
  }, []);

  const filteredContracts = contractsData.filter((contract: ContractData) => {
    const matchesSearch =
      contract.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
      contract.client.toLowerCase().includes(searchTerm.toLowerCase());

    let matchesFilter = false;
    if (selectedFilter === "all") {
      matchesFilter = true;
    } else if (selectedFilter === "in progress") {
      matchesFilter = contract.status.toLowerCase() === "in progress";
    } else if (selectedFilter === "expired") {
      matchesFilter = contract.status.toLowerCase() === "expired";
    } else if (selectedFilter === "cancelled") {
      matchesFilter = contract.status.toLowerCase() === "cancelled";
    } else {
      matchesFilter =
        contract.status.toLowerCase() === selectedFilter.toLowerCase();
    }

    return matchesSearch && matchesFilter;
  });

  // Pagination calculations
  const totalPages = Math.ceil(filteredContracts.length / contractsPerPage);
  const startIndex = (currentPage - 1) * contractsPerPage;
  const endIndex = startIndex + contractsPerPage;
  const currentContracts = filteredContracts.slice(startIndex, endIndex);

  // Reset to page 1 when filter changes
  useEffect(() => {
    setCurrentPage(1);
  }, [selectedFilter, searchTerm]);

  const statusCounts = {
    active: contractsData.filter(
      (c: ContractData) => c.status.toLowerCase() === "active"
    ).length,
    inProgress: contractsData.filter(
      (c: ContractData) => c.status.toLowerCase() === "in progress"
    ).length,
    expired: contractsData.filter(
      (c: ContractData) => c.status.toLowerCase() === "expired"
    ).length,
    cancelled: contractsData.filter(
      (c: ContractData) => c.status.toLowerCase() === "cancelled"
    ).length,
  };

  if (loading) {
    return (
      <section
        data-section="contracts"
        className="py-16 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-gray-50 via-blue-50/30 to-green-50/20 dark:from-gray-900 dark:via-blue-900/20 dark:to-green-900/10"
      >
        <div className="max-w-7xl mx-auto flex items-center justify-center min-h-[400px]">
          <div className="text-center">
            <motion.div
              animate={{ rotate: 360 }}
              transition={{ duration: 2, repeat: Infinity, ease: "linear" }}
              className="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-green-500 rounded-2xl mb-4 shadow-2xl"
            >
              <FileText className="w-8 h-8 text-white" />
            </motion.div>
            <p className="text-lg font-semibold text-gray-600 dark:text-gray-300">
              Loading Contract Data...
            </p>
          </div>
        </div>
      </section>
    );
  }

  return (
    <section
      data-section="contracts"
      className="py-16 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-gray-50 via-blue-50/30 to-green-50/20 dark:from-gray-900 dark:via-blue-900/20 dark:to-green-900/10"
    >
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          whileInView={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.6 }}
          viewport={{ once: true }}
          className="text-center mb-12"
        >
          <motion.div
            initial={{ scale: 0.8 }}
            whileInView={{ scale: 1 }}
            transition={{ duration: 0.5, delay: 0.1 }}
            viewport={{ once: true }}
            className="inline-flex items-center gap-2 bg-gradient-to-r from-blue-500/10 to-green-500/10 px-4 py-2 rounded-full mb-6 border border-blue-200/30 dark:border-blue-700/30"
          >
            <FileText className="w-4 h-4 text-blue-600 dark:text-blue-400" />
            <span className="text-sm font-medium text-blue-700 dark:text-blue-300">
              Contract Management
            </span>
          </motion.div>

          <motion.h2
            initial={{ opacity: 0, y: 15 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6, delay: 0.2 }}
            viewport={{ once: true }}
            className="text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-4 bg-gradient-to-r from-gray-900 via-blue-900 to-green-900 dark:from-gray-100 dark:via-blue-100 dark:to-green-100 bg-clip-text text-transparent"
          >
            Active Contracts
          </motion.h2>

          <motion.div
            initial={{ width: 0 }}
            whileInView={{ width: "120px" }}
            transition={{ duration: 0.8, delay: 0.4 }}
            viewport={{ once: true }}
            className="h-1 bg-gradient-to-r from-blue-500 to-green-600 rounded-full mx-auto mb-6"
          />

          <motion.p
            initial={{ opacity: 0, y: 10 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6, delay: 0.5 }}
            viewport={{ once: true }}
            className="text-lg text-muted-foreground max-w-2xl mx-auto"
          >
            Monitor and manage all your business contracts in one centralized
            location.
          </motion.p>
        </motion.div>

        {/* Stats Cards */}
        <motion.div
          initial={{ opacity: 0, y: 30 }}
          whileInView={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.6, delay: 0.2 }}
          viewport={{ once: true }}
          className="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8"
        >
          <div className="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-green-500/10 rounded-lg">
                <CheckCircle className="w-5 h-5 text-green-600 dark:text-green-400" />
              </div>
              <div>
                <p className="text-2xl font-bold text-gray-900 dark:text-white">
                  {statusCounts.active}
                </p>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  Active
                </p>
              </div>
            </div>
          </div>

          <div className="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-yellow-500/10 rounded-lg">
                <Clock className="w-5 h-5 text-yellow-600 dark:text-yellow-400" />
              </div>
              <div>
                <p className="text-2xl font-bold text-gray-900 dark:text-white">
                  {statusCounts.inProgress}
                </p>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  In Progress
                </p>
              </div>
            </div>
          </div>

          <div className="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-red-500/10 rounded-lg">
                <AlertTriangle className="w-5 h-5 text-red-600 dark:text-red-400" />
              </div>
              <div>
                <p className="text-2xl font-bold text-gray-900 dark:text-white">
                  {statusCounts.expired}
                </p>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  Expired
                </p>
              </div>
            </div>
          </div>

          <div className="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-gray-500/10 rounded-lg">
                <AlertTriangle className="w-5 h-5 text-gray-600 dark:text-gray-400" />
              </div>
              <div>
                <p className="text-2xl font-bold text-gray-900 dark:text-white">
                  {statusCounts.cancelled}
                </p>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  Cancelled
                </p>
              </div>
            </div>
          </div>
        </motion.div>

        {/* Controls */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          whileInView={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.6, delay: 0.3 }}
          viewport={{ once: true }}
          className="flex flex-col sm:flex-row gap-4 mb-8"
        >
          {/* Search */}
          <div className="relative flex-1">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400" />
            <input
              type="text"
              placeholder="Search contracts..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="w-full pl-10 pr-4 py-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 dark:focus:ring-blue-400/50"
            />
          </div>

          {/* Filter */}
          <div className="flex items-center gap-2">
            <Filter className="w-4 h-4 text-gray-500" />
            <select
              value={selectedFilter}
              onChange={(e) => setSelectedFilter(e.target.value)}
              className="px-3 py-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 dark:focus:ring-blue-400/50"
            >
              <option value="all">All Status</option>
              <option value="active">Active</option>
              <option value="in progress">In Progress</option>
              <option value="expired">Expired</option>
              <option value="cancelled">Cancelled</option>
            </select>
          </div>
        </motion.div>

        {/* Contracts Grid - Fixed 2 rows x 3 columns */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 min-h-[600px]">
          {currentContracts.map((contract: ContractData, index: number) => (
            <motion.div
              key={contract.id}
              initial={{ opacity: 0, y: 30, scale: 0.9 }}
              whileInView={{ opacity: 1, y: 0, scale: 1 }}
              transition={{
                duration: 0.6,
                delay: index * 0.1,
                ease: [0.23, 1, 0.32, 1],
              }}
              viewport={{ once: true }}
              onMouseEnter={() => setHoveredContract(contract.id)}
              onMouseLeave={() => setHoveredContract(null)}
              className="group cursor-pointer"
            >
              <motion.div
                whileHover={{ y: -5, scale: 1.02 }}
                whileTap={{ scale: 0.98 }}
                transition={{ duration: 0.3, ease: "easeOut" }}
                className="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden"
              >
                {/* Header */}
                <div className="p-6 pb-4">
                  <div className="flex items-start justify-between mb-4">
                    <div className="flex items-center gap-3">
                      <div className="p-2 bg-blue-500/10 rounded-lg">
                        <FileText className="w-5 h-5 text-blue-600 dark:text-blue-400" />
                      </div>
                      <div>
                        <h3 className="font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
                          {contract.title}
                        </h3>
                        <p className="text-sm text-gray-500 dark:text-gray-400">
                          {contract.id}
                        </p>
                      </div>
                    </div>
                    <button className="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">
                      <MoreVertical className="w-4 h-4 text-gray-400" />
                    </button>
                  </div>

                  {/* Status */}
                  <div className="flex items-center gap-2 mb-4">
                    <span
                      className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(
                        contract.status
                      )}`}
                    >
                      {getStatusIcon(contract.status)}
                      {contract.status.charAt(0).toUpperCase() +
                        contract.status.slice(1)}
                    </span>
                    <span className="text-xs text-gray-500 dark:text-gray-400">
                      {contract.type}
                    </span>
                  </div>
                </div>

                {/* Content */}
                <div className="px-6 pb-4">
                  <div className="grid grid-cols-2 gap-4 mb-4">
                    <div className="flex items-center gap-2">
                      <Building2 className="w-4 h-4 text-gray-400" />
                      <div>
                        <p className="text-xs text-gray-500 dark:text-gray-400">
                          Client
                        </p>
                        <p className="text-sm font-medium text-gray-900 dark:text-white">
                          {contract.client}
                        </p>
                      </div>
                    </div>
                    <div className="flex items-center gap-2">
                      <DollarSign className="w-4 h-4 text-green-500" />
                      <div>
                        <p className="text-xs text-gray-500 dark:text-gray-400">
                          Value
                        </p>
                        <p className="text-sm font-bold text-green-600 dark:text-green-400">
                          {contract.value}
                        </p>
                      </div>
                    </div>
                  </div>

                  <div className="grid grid-cols-2 gap-4 mb-4">
                    <div className="flex items-center gap-2">
                      <Calendar className="w-4 h-4 text-gray-400" />
                      <div>
                        <p className="text-xs text-gray-500 dark:text-gray-400">
                          Start Date
                        </p>
                        <p className="text-sm text-gray-900 dark:text-white">
                          {new Date(contract.startDate).toLocaleDateString()}
                        </p>
                      </div>
                    </div>
                    <div className="flex items-center gap-2">
                      <Globe className="w-4 h-4 text-gray-400" />
                      <div>
                        <p className="text-xs text-gray-500 dark:text-gray-400">
                          Region
                        </p>
                        <p className="text-sm text-gray-900 dark:text-white">
                          {contract.region}
                        </p>
                      </div>
                    </div>
                  </div>

                  {/* Progress */}
                  <div className="mb-4">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-xs text-gray-500 dark:text-gray-400">
                        Progress
                      </span>
                      <span className="text-xs font-medium text-gray-900 dark:text-white">
                        {contract.progress}%
                      </span>
                    </div>
                    <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                      <motion.div
                        initial={{ width: 0 }}
                        whileInView={{ width: `${contract.progress}%` }}
                        transition={{ duration: 1, delay: index * 0.1 }}
                        viewport={{ once: true }}
                        className="bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full"
                      />
                    </div>
                  </div>
                </div>

                {/* Actions */}
                <div className="px-6 py-4 bg-gray-50/50 dark:bg-gray-700/30 border-t border-gray-200/20 dark:border-gray-600/20">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-2">
                      <button className="p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors">
                        <Eye className="w-4 h-4 text-gray-600 dark:text-gray-300" />
                      </button>
                      <button className="p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors">
                        <Edit className="w-4 h-4 text-gray-600 dark:text-gray-300" />
                      </button>
                      <button className="p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors">
                        <Download className="w-4 h-4 text-gray-600 dark:text-gray-300" />
                      </button>
                    </div>
                    <p className="text-xs text-gray-500 dark:text-gray-400">
                      Ends: {new Date(contract.endDate).toLocaleDateString()}
                    </p>
                  </div>
                </div>

                {/* Hover Effect */}
                {hoveredContract === contract.id && (
                  <motion.div
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="absolute inset-0 bg-gradient-to-r from-blue-500/5 to-green-500/5 pointer-events-none rounded-xl"
                  />
                )}
              </motion.div>
            </motion.div>
          ))}
        </div>

        {/* Pagination */}
        {totalPages > 1 && (
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6, delay: 0.4 }}
            className="flex items-center justify-center gap-2 mt-12"
          >
            {/* Previous Button */}
            <button
              onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}
              disabled={currentPage === 1}
              className="flex items-center gap-2 px-4 py-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"
            >
              <ChevronLeft className="w-4 h-4" />
              <span className="hidden sm:inline">Previous</span>
            </button>

            {/* Page Numbers */}
            <div className="flex items-center gap-1">
              {Array.from({ length: totalPages }, (_, i) => i + 1).map(
                (page) => {
                  // Show first page, last page, current page, and pages around current
                  const shouldShow =
                    page === 1 ||
                    page === totalPages ||
                    (page >= currentPage - 1 && page <= currentPage + 1);

                  if (!shouldShow) {
                    // Show ellipsis
                    if (page === currentPage - 2 || page === currentPage + 2) {
                      return (
                        <span
                          key={page}
                          className="px-2 py-2 text-gray-500 dark:text-gray-400"
                        >
                          ...
                        </span>
                      );
                    }
                    return null;
                  }

                  return (
                    <button
                      key={page}
                      onClick={() => setCurrentPage(page)}
                      className={`w-10 h-10 rounded-lg font-medium transition-all duration-200 ${
                        currentPage === page
                          ? "bg-blue-500 text-white shadow-lg scale-105"
                          : "bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"
                      }`}
                    >
                      {page}
                    </button>
                  );
                }
              )}
            </div>

            {/* Next Button */}
            <button
              onClick={() =>
                setCurrentPage((prev) => Math.min(prev + 1, totalPages))
              }
              disabled={currentPage === totalPages}
              className="flex items-center gap-2 px-4 py-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"
            >
              <span className="hidden sm:inline">Next</span>
              <ChevronRight className="w-4 h-4" />
            </button>
          </motion.div>
        )}

        {/* Page Info */}
        {totalPages > 0 && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ duration: 0.6, delay: 0.5 }}
            className="text-center mt-6"
          >
            <p className="text-sm text-gray-600 dark:text-gray-400">
              Showing {startIndex + 1}-
              {Math.min(endIndex, filteredContracts.length)} of{" "}
              {filteredContracts.length} contracts
            </p>
          </motion.div>
        )}

        {/* Empty State */}
        {filteredContracts.length === 0 && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            className="text-center py-12"
          >
            <FileText className="w-16 h-16 text-gray-400 mx-auto mb-4" />
            <h3 className="text-lg font-medium text-gray-900 dark:text-white mb-2">
              No contracts found
            </h3>
            <p className="text-gray-500 dark:text-gray-400">
              Try adjusting your search or filter criteria.
            </p>
          </motion.div>
        )}
      </div>
    </section>
  );
}

>>>components/dashboard/CoreHub.tsx
"use client";

import React, { useState } from "react";
import { motion } from "framer-motion";
import {
  Factory,
  Database,
  Network,
  X,
  AlertTriangle,
  BarChart3,
  Zap,
  Settings,
  Shield,
  Activity,
} from "lucide-react";

const CoreHub = () => {
  const [isMiddlewareModalOpen, setIsMiddlewareModalOpen] = useState(false);
  const [isPlantInfraModalOpen, setIsPlantInfraModalOpen] = useState(false);

  return (
    <section className="py-16 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-gray-50 via-white to-indigo-50 dark:from-gray-950 dark:via-gray-900 dark:to-indigo-950/20">
      <div className="max-w-7xl mx-auto">
        {/* Section Header */}
        <motion.div
          initial={{ opacity: 0, y: 30 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6 }}
          className="text-center mb-12"
        >
          <h2 className="text-4xl font-bold text-gray-900 dark:text-white mb-4">
            Core Hub and Data
          </h2>
          <p className="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
            Central technology backbone powering Cargill's global operations
            with enterprise middleware, industrial IoT infrastructure, and data
            management systems.
          </p>
        </motion.div>

        {/* Core Metrics Grid */}
        <motion.div
          initial={{ opacity: 0, y: 40 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6, delay: 0.2 }}
          className="grid grid-cols-1 md:grid-cols-3 gap-8"
        >
          {/* Middleware Card */}
          <motion.div
            initial={{ opacity: 0, y: 40 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true }}
            transition={{ duration: 0.6, delay: 0 }}
            className="group relative"
          >
            <div
              className="relative overflow-hidden rounded-3xl bg-gradient-to-br from-emerald-50 via-green-50 to-emerald-100 dark:from-emerald-900/30 dark:via-green-900/30 dark:to-emerald-900/20 border-2 border-emerald-200 dark:border-emerald-700 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.02] cursor-pointer"
              onClick={() => setIsMiddlewareModalOpen(true)}
            >
              {/* Animated Background Pulse - Only on Hover */}
              <motion.div
                initial={{ opacity: 0.1 }}
                whileHover={{
                  opacity: [0.1, 0.3, 0.1],
                }}
                transition={{
                  duration: 1.5,
                  repeat: Infinity,
                  ease: "easeInOut",
                }}
                className="absolute inset-0 bg-gradient-to-r from-emerald-500 to-green-600 opacity-20"
              />

              {/* Main Content */}
              <div className="p-8 relative z-10">
                {/* Icon */}
                <div className="flex items-center justify-center mb-6">
                  <div className="p-4 bg-gradient-to-r from-emerald-500 to-green-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300">
                    <Network className="w-8 h-8 text-white" />
                  </div>
                </div>

                {/* Title */}
                <h3 className="text-xl font-bold text-emerald-800 dark:text-emerald-200 mb-2 text-center group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-emerald-500 group-hover:to-green-600 transition-all duration-300">
                  Middleware
                </h3>

                {/* Value */}
                <div className="text-center mb-4">
                  <motion.div
                    initial={{ scale: 0.8, opacity: 0 }}
                    whileInView={{ scale: 1, opacity: 1 }}
                    viewport={{ once: true }}
                    transition={{ duration: 0.6, delay: 0.3 }}
                    className="text-4xl font-bold text-emerald-600 dark:text-emerald-400 mb-1"
                  >
                    2100+
                  </motion.div>
                  <p className="text-sm font-medium text-gray-600 dark:text-gray-400">
                    Interfaces
                  </p>
                </div>

                {/* Details */}
                <div className="text-center">
                  <p className="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">
                    Enterprise service bus and API gateway connections
                  </p>
                </div>
              </div>

              {/* Decorative Background Elements */}
              <div className="absolute top-0 right-0 w-32 h-32 opacity-10">
                <div className="w-full h-full bg-gradient-to-br from-emerald-500 to-green-600 rounded-full blur-2xl"></div>
              </div>
              <div className="absolute bottom-0 left-0 w-24 h-24 opacity-10">
                <div className="w-full h-full bg-gradient-to-tr from-emerald-500 to-green-600 rounded-full blur-xl"></div>
              </div>
            </div>
          </motion.div>

          {/* Plant Infrastructure Card */}
          <motion.div
            initial={{ opacity: 0, y: 40 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true }}
            transition={{ duration: 0.6, delay: 0.1 }}
            className="group relative"
          >
            <div
              className="relative overflow-hidden rounded-3xl bg-gradient-to-br from-green-50 via-emerald-50 to-green-100 dark:from-emerald-900/30 dark:via-green-900/30 dark:to-emerald-900/20 border-2 border-emerald-200 dark:border-emerald-700 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.02] cursor-pointer"
              // onClick={() => setIsPlantInfraModalOpen(true)}
            >
              {/* Animated Background Pulse - Only on Hover */}
              <motion.div
                initial={{ opacity: 0.1 }}
                whileHover={{
                  opacity: [0.1, 0.3, 0.1],
                }}
                transition={{
                  duration: 1.5,
                  repeat: Infinity,
                  ease: "easeInOut",
                }}
                className="absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-600 opacity-20"
              />

              {/* Main Content */}
              <div className="p-8 relative z-10">
                {/* Icon */}
                <div className="flex items-center justify-center mb-6">
                  <div className="p-4 bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300">
                    <Factory className="w-8 h-8 text-white" />
                  </div>
                </div>

                {/* Title */}
                <h3 className="text-xl font-bold text-emerald-800 dark:text-emerald-200 mb-2 text-center group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-green-500 group-hover:to-emerald-600 transition-all duration-300">
                  Plant Infrastructure
                </h3>

                {/* Value */}
                <div className="text-center mb-4">
                  <motion.div
                    initial={{ scale: 0.8, opacity: 0 }}
                    whileInView={{ scale: 1, opacity: 1 }}
                    viewport={{ once: true }}
                    transition={{ duration: 0.6, delay: 0.5 }}
                    className="text-4xl font-bold text-emerald-600 dark:text-emerald-400 mb-1"
                  >
                    11,000
                  </motion.div>
                  <p className="text-sm font-medium text-gray-600 dark:text-gray-400">
                    Devices
                  </p>
                </div>

                {/* Details */}
                <div className="text-center">
                  <p className="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">
                    IoT sensors, controllers, and monitoring systems
                  </p>
                </div>
              </div>

              {/* Decorative Background Elements */}
              <div className="absolute top-0 right-0 w-32 h-32 opacity-10">
                <div className="w-full h-full bg-gradient-to-br from-green-500 to-emerald-600 rounded-full blur-2xl"></div>
              </div>
              <div className="absolute bottom-0 left-0 w-24 h-24 opacity-10">
                <div className="w-full h-full bg-gradient-to-tr from-green-500 to-emerald-600 rounded-full blur-xl"></div>
              </div>
            </div>
          </motion.div>

          {/* Data Card */}
          <motion.div
            initial={{ opacity: 0, y: 40 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true }}
            transition={{ duration: 0.6, delay: 0.2 }}
            className="group relative"
          >
            <div className="relative overflow-hidden rounded-3xl bg-gradient-to-br from-emerald-50 via-green-50 to-emerald-100 dark:from-emerald-900/30 dark:via-green-900/30 dark:to-emerald-900/20 border-2 border-emerald-200 dark:border-emerald-700 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.02] cursor-pointer">
              {/* Animated Background Pulse - Only on Hover */}
              <motion.div
                initial={{ opacity: 0.1 }}
                whileHover={{
                  opacity: [0.1, 0.3, 0.1],
                }}
                transition={{
                  duration: 1.5,
                  repeat: Infinity,
                  ease: "easeInOut",
                }}
                className="absolute inset-0 bg-gradient-to-r from-emerald-500 to-green-600 opacity-20"
              />

              {/* Main Content */}
              <div className="p-8 relative z-10">
                {/* Icon */}
                <div className="flex items-center justify-center mb-6">
                  <div className="p-4 bg-gradient-to-r from-emerald-500 to-green-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300">
                    <Database className="w-8 h-8 text-white" />
                  </div>
                </div>

                {/* Title */}
                <h3 className="text-xl font-bold text-emerald-800 dark:text-emerald-200 mb-2 text-center group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-emerald-500 group-hover:to-green-600 transition-all duration-300">
                  Data
                </h3>

                {/* Value */}
                <div className="text-center mb-4">
                  <motion.div
                    initial={{ scale: 0.8, opacity: 0 }}
                    whileInView={{ scale: 1, opacity: 1 }}
                    viewport={{ once: true }}
                    transition={{ duration: 0.6, delay: 0.7 }}
                    className="text-4xl font-bold text-emerald-600 dark:text-emerald-400 mb-1"
                  >
                    57+
                  </motion.div>
                  <p className="text-sm font-medium text-gray-600 dark:text-gray-400">
                    Apps
                  </p>
                </div>

                {/* Details */}
                <div className="text-center">
                  <p className="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">
                    Data analytics and business intelligence applications
                  </p>
                </div>
              </div>

              {/* Decorative Background Elements */}
              <div className="absolute top-0 right-0 w-32 h-32 opacity-10">
                <div className="w-full h-full bg-gradient-to-br from-emerald-500 to-green-600 rounded-full blur-2xl"></div>
              </div>
              <div className="absolute bottom-0 left-0 w-24 h-24 opacity-10">
                <div className="w-full h-full bg-gradient-to-tr from-emerald-500 to-green-600 rounded-full blur-xl"></div>
              </div>
            </div>
          </motion.div>
        </motion.div>
      </div>

      {/* Middleware Modal */}
      {isMiddlewareModalOpen && (
        <div className="fixed inset-0 bg-white/30 dark:bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4">
          <motion.div
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.9 }}
            className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"
          >
            {/* Modal Header */}
            <div className="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
              <div className="flex items-center space-x-3">
                <div className="p-3 bg-gradient-to-r from-emerald-500 to-green-600 rounded-xl">
                  <Network className="w-6 h-6 text-white" />
                </div>
                <div>
                  <h2 className="text-2xl font-bold text-gray-900 dark:text-white">
                    Middleware Details
                  </h2>
                  <p className="text-sm text-gray-600 dark:text-gray-400">
                    Enterprise service bus and API gateway connections
                  </p>
                </div>
              </div>
              <button
                onClick={() => setIsMiddlewareModalOpen(false)}
                className="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
              >
                <X className="w-5 h-5 text-gray-500 dark:text-gray-400" />
              </button>
            </div>

            {/* Modal Content */}
            <div className="p-6 space-y-6">
              {/* Tickets Influx */}
              <div className="bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800">
                <div className="flex items-center space-x-3 mb-4">
                  <div className="p-2 bg-blue-500 rounded-lg">
                    <BarChart3 className="w-5 h-5 text-white" />
                  </div>
                  <h3 className="text-lg font-semibold text-blue-900 dark:text-blue-100">
                    Tickets Influx
                  </h3>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="text-center">
                    <div className="text-2xl font-bold text-blue-600 dark:text-blue-400">
                      287
                    </div>
                    <div className="text-sm text-gray-600 dark:text-gray-400">
                      Open Tickets
                    </div>
                  </div>
                  <div className="text-center">
                    <div className="text-2xl font-bold text-green-600 dark:text-green-400">
                      1,543
                    </div>
                    <div className="text-sm text-gray-600 dark:text-gray-400">
                      Resolved This Month
                    </div>
                  </div>
                  <div className="text-center">
                    <div className="text-2xl font-bold text-orange-600 dark:text-orange-400">
                      4.2h
                    </div>
                    <div className="text-sm text-gray-600 dark:text-gray-400">
                      Avg Resolution Time
                    </div>
                  </div>
                </div>
              </div>

              {/* Critical Issues */}
              <div className="bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-xl p-6 border border-red-200 dark:border-red-800">
                <div className="flex items-center space-x-3 mb-4">
                  <div className="p-2 bg-red-500 rounded-lg">
                    <AlertTriangle className="w-5 h-5 text-white" />
                  </div>
                  <h3 className="text-lg font-semibold text-red-900 dark:text-red-100">
                    Critical Issues
                  </h3>
                </div>
                <div className="space-y-3">
                  <div className="flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg">
                    <div>
                      <div className="font-medium text-gray-900 dark:text-white">
                        API Gateway Latency
                      </div>
                      <div className="text-sm text-gray-600 dark:text-gray-400">
                        High response times detected
                      </div>
                    </div>
                    <span className="px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 text-xs rounded-full">
                      P1
                    </span>
                  </div>
                  <div className="flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg">
                    <div>
                      <div className="font-medium text-gray-900 dark:text-white">
                        Message Queue Overflow
                      </div>
                      <div className="text-sm text-gray-600 dark:text-gray-400">
                        Queue capacity at 95%
                      </div>
                    </div>
                    <span className="px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400 text-xs rounded-full">
                      P2
                    </span>
                  </div>
                  <div className="flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg">
                    <div>
                      <div className="font-medium text-gray-900 dark:text-white">
                        Connection Pool Exhaustion
                      </div>
                      <div className="text-sm text-gray-600 dark:text-gray-400">
                        Database connections maxed out
                      </div>
                    </div>
                    <span className="px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 text-xs rounded-full">
                      P1
                    </span>
                  </div>
                </div>
              </div>

              {/* Automation Details */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800">
                <div className="flex items-center space-x-3 mb-4">
                  <div className="p-2 bg-green-500 rounded-lg">
                    <Zap className="w-5 h-5 text-white" />
                  </div>
                  <h3 className="text-lg font-semibold text-green-900 dark:text-green-100">
                    Automation Details
                  </h3>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="space-y-3">
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Auto-scaling
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Active
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Load Balancing
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Active
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Health Checks
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Running
                      </span>
                    </div>
                  </div>
                  <div className="space-y-3">
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Failover
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Configured
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Circuit Breaker
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Active
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Rate Limiting
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Enabled
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </motion.div>
        </div>
      )}

      {/* Plant Infrastructure Modal */}
      {isPlantInfraModalOpen && (
        <div className="fixed inset-0 bg-white/30 dark:bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4">
          <motion.div
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.9 }}
            className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"
          >
            {/* Modal Header */}
            <div className="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
              <div className="flex items-center space-x-3">
                <div className="p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl">
                  <Factory className="w-6 h-6 text-white" />
                </div>
                <div>
                  <h2 className="text-2xl font-bold text-gray-900 dark:text-white">
                    Plant Infrastructure Details
                  </h2>
                  <p className="text-sm text-gray-600 dark:text-gray-400">
                    IoT sensors, controllers, and monitoring systems
                  </p>
                </div>
              </div>
              <button
                onClick={() => setIsPlantInfraModalOpen(false)}
                className="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
              >
                <X className="w-5 h-5 text-gray-500 dark:text-gray-400" />
              </button>
            </div>

            {/* Modal Content */}
            <div className="p-6 space-y-6">
              {/* Device Analytics */}
              <div className="bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800">
                <div className="flex items-center space-x-3 mb-4">
                  <div className="p-2 bg-purple-500 rounded-lg">
                    <BarChart3 className="w-5 h-5 text-white" />
                  </div>
                  <h3 className="text-lg font-semibold text-purple-900 dark:text-purple-100">
                    Device Analytics
                  </h3>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="text-center">
                    <div className="text-2xl font-bold text-purple-600 dark:text-purple-400">
                      10,847
                    </div>
                    <div className="text-sm text-gray-600 dark:text-gray-400">
                      Active Devices
                    </div>
                  </div>
                  <div className="text-center">
                    <div className="text-2xl font-bold text-green-600 dark:text-green-400">
                      98.7%
                    </div>
                    <div className="text-sm text-gray-600 dark:text-gray-400">
                      Uptime
                    </div>
                  </div>
                  <div className="text-center">
                    <div className="text-2xl font-bold text-orange-600 dark:text-orange-400">
                      153
                    </div>
                    <div className="text-sm text-gray-600 dark:text-gray-400">
                      Offline Devices
                    </div>
                  </div>
                </div>
              </div>

              {/* System Status */}
              <div className="bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 rounded-xl p-6 border border-amber-200 dark:border-amber-800">
                <div className="flex items-center space-x-3 mb-4">
                  <div className="p-2 bg-amber-500 rounded-lg">
                    <Activity className="w-5 h-5 text-white" />
                  </div>
                  <h3 className="text-lg font-semibold text-amber-900 dark:text-amber-100">
                    System Status
                  </h3>
                </div>
                <div className="space-y-3">
                  <div className="flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg">
                    <div>
                      <div className="font-medium text-gray-900 dark:text-white">
                        Temperature Sensors
                      </div>
                      <div className="text-sm text-gray-600 dark:text-gray-400">
                        2,847 units monitoring
                      </div>
                    </div>
                    <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                      Operational
                    </span>
                  </div>
                  <div className="flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg">
                    <div>
                      <div className="font-medium text-gray-900 dark:text-white">
                        Pressure Controllers
                      </div>
                      <div className="text-sm text-gray-600 dark:text-gray-400">
                        1,523 units active
                      </div>
                    </div>
                    <span className="px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400 text-xs rounded-full">
                      Maintenance
                    </span>
                  </div>
                  <div className="flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg">
                    <div>
                      <div className="font-medium text-gray-900 dark:text-white">
                        Flow Meters
                      </div>
                      <div className="text-sm text-gray-600 dark:text-gray-400">
                        3,621 units operational
                      </div>
                    </div>
                    <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                      Operational
                    </span>
                  </div>
                  <div className="flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg">
                    <div>
                      <div className="font-medium text-gray-900 dark:text-white">
                        Safety Systems
                      </div>
                      <div className="text-sm text-gray-600 dark:text-gray-400">
                        2,956 monitoring points
                      </div>
                    </div>
                    <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                      Active
                    </span>
                  </div>
                </div>
              </div>

              {/* Security & Compliance */}
              <div className="bg-gradient-to-br from-teal-50 to-cyan-50 dark:from-teal-900/20 dark:to-cyan-900/20 rounded-xl p-6 border border-teal-200 dark:border-teal-800">
                <div className="flex items-center space-x-3 mb-4">
                  <div className="p-2 bg-teal-500 rounded-lg">
                    <Shield className="w-5 h-5 text-white" />
                  </div>
                  <h3 className="text-lg font-semibold text-teal-900 dark:text-teal-100">
                    Security & Compliance
                  </h3>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="space-y-3">
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Device Authentication
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Secured
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Data Encryption
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        AES-256
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Network Segmentation
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Isolated
                      </span>
                    </div>
                  </div>
                  <div className="space-y-3">
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Compliance Status
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        ISO 27001
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Vulnerability Scan
                      </span>
                      <span className="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 text-xs rounded-full">
                        Weekly
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-gray-600 dark:text-gray-400">
                        Access Control
                      </span>
                      <span className="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs rounded-full">
                        Role-based
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </motion.div>
        </div>
      )}
    </section>
  );
};

export default CoreHub;

>>>components/dashboard/DashboardSidebarNavigation.tsx
"use client";
import React, { useState, useEffect } from "react";
import { motion } from "motion/react";

interface NavigationItem {
  id: string;
  label: string;
  targetId: string;
}

const navigationItems: NavigationItem[] = [
  {
    id: "enterprises",
    label: "Enterprises",
    targetId: "enterprises",
  },
  {
    id: "core-hub",
    label: "Core & Hub",
    targetId: "core-hub",
  },
  {
    id: "value-capture",
    label: "Value Capture",
    targetId: "value-capture",
  },
  // {
  //   id: "contracts",
  //   label: "Contracts",
  //   targetId: "contracts",
  // },
];

export default function DashboardSidebarNavigation() {
  const [activeSection, setActiveSection] = useState<string>("");
  const [isHovered, setIsHovered] = useState(false);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    // Show sidebar after a small delay
    const timer = setTimeout(() => setIsVisible(true), 1000);
    return () => clearTimeout(timer);
  }, []);

  useEffect(() => {
    const handleScroll = () => {
      const sections = navigationItems.map((item) => ({
        id: item.id,
        element: document.getElementById(item.targetId),
      }));

      const scrollPosition = window.scrollY + 100;
      let currentSection = "";

      for (let i = sections.length - 1; i >= 0; i--) {
        const section = sections[i];
        if (section.element && section.element.offsetTop <= scrollPosition) {
          currentSection = section.id;
          break;
        }
      }

      setActiveSection(currentSection);
    };

    window.addEventListener("scroll", handleScroll);
    handleScroll(); // Initial check

    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  const scrollToSection = (targetId: string) => {
    const element = document.getElementById(targetId);
    if (element) {
      element.scrollIntoView({
        behavior: "smooth",
        block: "start",
      });
    }
  };

  if (!isVisible) return null;

  return (
    <motion.div
      initial={{ opacity: 0, x: 80 }}
      animate={{
        opacity: 1,
        x: isHovered ? 0 : 50, // Default position shows only half (50px to the right)
      }}
      transition={{ duration: 0.4, ease: "easeOut" }}
      className="fixed right-0 top-1/2 -translate-y-1/2 z-40"
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
    >
      <div className="bg-white/20 dark:bg-gray-800/20 backdrop-blur-md rounded-2xl border border-white/30 dark:border-gray-700/30 p-4 shadow-xl">
        <div className="flex flex-col space-y-4">
          {navigationItems.map((item, index) => (
            <motion.button
              key={item.id}
              onClick={() => scrollToSection(item.targetId)}
              className="group relative flex items-center justify-center"
              whileHover={{ scale: 1.2 }}
              whileTap={{ scale: 0.9 }}
            >
              {/* Dot */}
              <div
                className={`w-3 h-3 rounded-full transition-all duration-300 ${
                  activeSection === item.id
                    ? "bg-gradient-to-r from-blue-500 to-green-500 shadow-lg shadow-blue-500/50"
                    : "bg-gray-400/60 hover:bg-gray-300 dark:bg-gray-600/60 dark:hover:bg-gray-500"
                }`}
              />

              {/* Active indicator ring */}
              {activeSection === item.id && (
                <motion.div
                  initial={{ scale: 0 }}
                  animate={{ scale: 1 }}
                  className="absolute w-5 h-5 rounded-full border-2 border-blue-400/60 animate-pulse"
                />
              )}

              {/* Tooltip */}
              <div className="absolute right-8 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none">
                <div className="bg-gray-900/90 dark:bg-white/90 text-white dark:text-gray-900 px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap backdrop-blur-sm">
                  {item.label}
                  <div className="absolute left-full top-1/2 -translate-y-1/2 w-2 h-2 bg-gray-900/90 dark:bg-white/90 rotate-45 -translate-x-1"></div>
                </div>
              </div>

              {/* Connection line */}
              {index < navigationItems.length - 1 && (
                <div className="absolute top-6 left-1/2 -translate-x-1/2 w-px h-4 bg-gradient-to-b from-gray-300/60 to-transparent dark:from-gray-600/60"></div>
              )}
            </motion.button>
          ))}
        </div>

        {/* Progress indicator */}
        <div className="mt-4 pt-4 border-t border-gray-300/30 dark:border-gray-600/30">
          <div className="flex items-center justify-center">
            <div className="w-8 h-1 bg-gray-200/60 dark:bg-gray-700/60 rounded-full overflow-hidden">
              <motion.div
                className="h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full"
                initial={{ width: "0%" }}
                animate={{
                  width: activeSection
                    ? `${
                        ((navigationItems.findIndex(
                          (item) => item.id === activeSection
                        ) +
                          1) /
                          navigationItems.length) *
                        100
                      }%`
                    : "0%",
                }}
                transition={{ duration: 0.3 }}
              />
            </div>
          </div>
        </div>
      </div>
    </motion.div>
  );
}

>>>components/dashboard/EnterpriseCards.tsx
"use client";

import React from "react";
import { motion } from "motion/react";
import {
  ChevronRight,
  Smartphone,
  Award,
  ServerCog,
  Ticket,
  AlertTriangleIcon,
} from "lucide-react";
import { EnterpriseData } from "@/lib/dataLoader";
import { getEnterpriseStatus, getIconFromName } from "../../app/dashboard/data";

interface EnterpriseCardsProps {
  enterpriseData: EnterpriseData[];
  hoveredAppIndex: number | null;
  setHoveredAppIndex: (index: number | null) => void;
  setSelectedEnterprise: (enterprise: EnterpriseData) => void;
  setShowNSAPModal: (show: boolean) => void;
  setSelectedSAPEnterprise: (enterprise: string) => void;
  setShowSAPModal: (show: boolean) => void;
  setSelectedNSAPCriticalEnterprise: (enterprise: EnterpriseData) => void;
  setShowNSAPCriticalModal: (show: boolean) => void;
  setSelectedSAPCriticalEnterprise: (enterprise: EnterpriseData) => void;
  setShowSAPCriticalModal: (show: boolean) => void;
}

export default function EnterpriseCards({
  enterpriseData,
  hoveredAppIndex,
  setHoveredAppIndex,
  setSelectedEnterprise,
  setShowNSAPModal,
  setSelectedSAPEnterprise,
  setShowSAPModal,
  setSelectedNSAPCriticalEnterprise,
  setShowNSAPCriticalModal,
  setSelectedSAPCriticalEnterprise,
  setShowSAPCriticalModal,
}: EnterpriseCardsProps) {
  return (
    <section id="enterprises" className="py-16 px-4 sm:px-6 lg:px-8">
      <div className="max-w-7xl mx-auto">
        {/* Section Header */}
        <motion.div
          initial={{ opacity: 0, y: 30 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6 }}
          className="text-center mb-12"
        >
          <h2 className="text-4xl font-bold text-gray-900 dark:text-white mb-4">
            Enterprises and Functions
          </h2>
          <p className="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
            Explore our comprehensive enterprise portfolio with detailed
            analytics on applications, security metrics, and business unit
            performance across all organizational divisions.
          </p>
        </motion.div>

        <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
          {enterpriseData.map((enterprise: EnterpriseData, index: number) => {
            const IconComponent = getIconFromName(enterprise.icon);
            const statusInfo = getEnterpriseStatus(
              enterprise.metrics.p1,
              enterprise.metrics.vulnerabilities
            );

            return (
              <motion.div
                key={enterprise.id}
                initial={{ opacity: 0, y: 40 }}
                whileInView={{ opacity: 1, y: 0 }}
                viewport={{ once: true }}
                transition={{ duration: 0.6, delay: index * 0.1 }}
                className="group relative"
              >
                <div
                  className={`relative overflow-hidden rounded-3xl bg-gradient-to-br ${statusInfo.cardBgColor} border-2 ${statusInfo.borderColor} shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.02] cursor-pointer`}
                >
                  {/* Animated Background Pulse */}
                  <motion.div
                    animate={{
                      opacity: [0.1, 0.3, 0.1],
                    }}
                    transition={{
                      duration: 3,
                      repeat: Infinity,
                      ease: "easeInOut",
                    }}
                    className={`absolute inset-0 ${statusInfo.bgPulse}`}
                  />

                  {/* Header */}
                  <div className="p-6 pb-4 pt-6 relative">
                    <div className="flex items-center space-x-4 mb-6">
                      {/* Icon Container */}
                      <div className="relative flex-shrink-0">
                        <div
                          className={`inline-flex items-center justify-center w-16 h-16 rounded-2xl shadow-xl group-hover:scale-110 group-hover:shadow-2xl transition-all duration-500 ${
                            enterprise.color.startsWith("#")
                              ? ""
                              : `bg-gradient-to-br ${enterprise.color}`
                          }`}
                          style={
                            enterprise.color.startsWith("#")
                              ? {
                                  backgroundColor: enterprise.color,
                                  boxShadow: `0 8px 25px ${enterprise.color}40`,
                                }
                              : {}
                          }
                        >
                          <IconComponent className="w-8 h-8 text-white drop-shadow-sm" />
                        </div>
                        {/* Glowing ring effect */}
                        <div
                          className="absolute inset-0 rounded-2xl opacity-20 group-hover:opacity-40 transition-opacity duration-500"
                          style={{
                            background: `conic-gradient(from 0deg, transparent, ${
                              enterprise.color.startsWith("#")
                                ? enterprise.color
                                : "#3B82F6"
                            }, transparent)`,
                            padding: "1px",
                            mask: "linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",
                            maskComposite: "subtract",
                          }}
                        />
                      </div>

                      {/* Title */}
                      <div className="flex-1 min-w-0">
                        <h3 className="text-xl font-bold text-gray-900 dark:text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-green-600 transition-all duration-500 leading-tight">
                          {enterprise.title}
                        </h3>
                        <div className="h-0.5 w-12 bg-gradient-to-r from-transparent via-gray-300 to-transparent dark:via-gray-600 mt-2 opacity-60 group-hover:w-16 group-hover:via-blue-500 transition-all duration-500"></div>
                      </div>
                    </div>
                  </div>

                  {/* Metrics Section - Always Visible */}
                  <div className="px-8 pb-6">
                    <div className="grid grid-cols-2 gap-4">
                      {/* Apps */}
                      <div
                        className="flex items-center space-x-3 p-3 rounded-xl bg-white/40 dark:bg-gray-800/20 backdrop-blur-sm border border-gray-200/20 dark:border-gray-600/20 relative overflow-visible cursor-pointer hover:bg-blue-50/70 dark:hover:bg-blue-900/30 transition-all duration-300 hover:scale-105 hover:shadow-md group/apps hover:border-blue-200/50 dark:hover:border-blue-700/50"
                        onMouseEnter={() => setHoveredAppIndex(index)}
                        onMouseLeave={() => setHoveredAppIndex(null)}
                        onClick={() => {
                          setSelectedEnterprise(enterprise);
                          setShowNSAPModal(true);
                        }}
                      >
                        <div className="flex-shrink-0">
                          <Smartphone className="w-4 h-4 text-blue-600 dark:text-blue-400 group-hover/apps:scale-110 transition-transform duration-300" />
                        </div>
                        <div className="flex-1 min-w-0">
                          <p className="text-xs font-medium text-gray-500 dark:text-gray-400 group-hover/apps:text-blue-600 dark:group-hover/apps:text-blue-300 transition-colors duration-300">
                            NSAP
                          </p>
                          <p className="text-sm font-bold text-gray-900 dark:text-white group-hover/apps:text-blue-800 dark:group-hover/apps:text-blue-200 transition-colors duration-300">
                            {enterprise.metrics.apps}
                          </p>
                        </div>
                        <div className="flex-shrink-0">
                          <ChevronRight
                            className={`w-4 h-4 text-gray-400 group-hover/apps:text-blue-600 group-hover/apps:translate-x-1 transition-all duration-300 ${
                              hoveredAppIndex === index
                                ? "opacity-0"
                                : "opacity-100"
                            }`}
                          />
                        </div>

                        {/* Apps Breakdown Tooltip */}
                        {hoveredAppIndex === index &&
                          enterprise.metrics.apps > 0 && (
                            <motion.div
                              initial={{ opacity: 0, y: 10, scale: 0.9 }}
                              animate={{ opacity: 1, y: 0, scale: 1 }}
                              exit={{ opacity: 0, y: 10, scale: 0.9 }}
                              transition={{ duration: 0.2 }}
                              className="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg px-3 py-2 shadow-xl border border-gray-700 dark:border-gray-600 whitespace-nowrap pointer-events-none z-50"
                              style={{ position: "absolute", zIndex: 10000 }}
                            >
                              <div className="space-y-1">
                                {(() => {
                                  // Calculate totals from all business units in this enterprise
                                  const totals = enterprise.items.reduce(
                                    (acc, item) => ({
                                      platinum:
                                        acc.platinum +
                                        (item.appBreakdown?.platinum || 0),
                                      gold:
                                        acc.gold +
                                        (item.appBreakdown?.gold || 0),
                                      silver:
                                        acc.silver +
                                        (item.appBreakdown?.silver || 0),
                                      bronze:
                                        acc.bronze +
                                        (item.appBreakdown?.bronze || 0),
                                      lead:
                                        acc.lead +
                                        (item.appBreakdown?.lead || 0),
                                    }),
                                    {
                                      platinum: 0,
                                      gold: 0,
                                      silver: 0,
                                      bronze: 0,
                                      lead: 0,
                                    }
                                  );
                                  return (
                                    <>
                                      <div className="flex items-center gap-2">
                                        <Award className="w-3 h-3 text-purple-400" />
                                        <span>Platinum: {totals.platinum}</span>
                                      </div>
                                      <div className="flex items-center gap-2">
                                        <Award className="w-3 h-3 text-yellow-400" />
                                        <span>Gold: {totals.gold}</span>
                                      </div>
                                      <div className="flex items-center gap-2">
                                        <Award className="w-3 h-3 text-gray-300" />
                                        <span>Silver: {totals.silver}</span>
                                      </div>
                                      <div className="flex items-center gap-2">
                                        <Award className="w-3 h-3 text-orange-400" />
                                        <span>Bronze: {totals.bronze}</span>
                                      </div>
                                      <div className="flex items-center gap-2">
                                        <Award className="w-3 h-3 text-blue-400" />
                                        <span>Lead: {totals.lead}</span>
                                      </div>
                                    </>
                                  );
                                })()}
                              </div>
                              {/* Tooltip arrow */}
                              <div className="absolute top-full left-1/2 transform -translate-x-1/2">
                                <div className="border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"></div>
                              </div>
                            </motion.div>
                          )}
                      </div>

                      {/* SAP */}
                      <div
                        className={`flex items-center space-x-3 p-3 rounded-xl bg-white/40 dark:bg-gray-800/20 backdrop-blur-sm border border-gray-200/20 dark:border-gray-600/20 transition-all duration-300 group/sap hover:border-green-200/50 dark:hover:border-green-700/50 ${
                          enterprise.title === "Ag & Trading" ||
                          enterprise.title === "Food" ||
                          enterprise.title === "Specialized Portfolio" ||
                          enterprise.title === "Corporate Functions"
                            ? "cursor-pointer hover:bg-green-50/70 dark:hover:bg-green-900/30 hover:scale-105 hover:shadow-md"
                            : ""
                        }`}
                        onClick={(e) => {
                          if (
                            enterprise.title === "Ag & Trading" ||
                            enterprise.title === "Food" ||
                            enterprise.title === "Specialized Portfolio" ||
                            enterprise.title === "Corporate Functions"
                          ) {
                            e.stopPropagation();
                            setSelectedSAPEnterprise(enterprise.title);
                            setShowSAPModal(true);
                          }
                        }}
                      >
                        <div className="flex-shrink-0">
                          <ServerCog className="w-4 h-4 text-green-600 dark:text-green-400 group-hover/sap:scale-110 transition-transform duration-300" />
                        </div>
                        <div className="flex-1 min-w-0">
                          <p className="text-xs font-medium text-gray-500 dark:text-gray-400 group-hover/sap:text-green-600 dark:group-hover/sap:text-green-300 transition-colors duration-300">
                            SAP
                          </p>
                          <p className="text-sm font-bold text-gray-900 dark:text-white group-hover/sap:text-green-800 dark:group-hover/sap:text-green-200 transition-colors duration-300">
                            {/* Static placeholder - replace with actual data */}
                            {index === 0
                              ? 127
                              : index === 1
                              ? 89
                              : index === 2
                              ? 156
                              : 73}
                          </p>
                        </div>
                        {(enterprise.title === "Ag & Trading" ||
                          enterprise.title === "Food" ||
                          enterprise.title === "Specialized Portfolio" ||
                          enterprise.title === "Corporate Functions") && (
                          <div className="flex-shrink-0">
                            <ChevronRight className="w-4 h-4 text-gray-400 group-hover/sap:text-green-600 group-hover/sap:translate-x-1 transition-all duration-300" />
                          </div>
                        )}
                      </div>
                    </div>

                    {/* Third row - Tickets (full width) */}
                    <div className="mt-4">
                      <div className="p-3 rounded-xl bg-white/40 dark:bg-gray-800/20 backdrop-blur-sm border border-gray-200/20 dark:border-gray-600/20">
                        <div className="flex items-center space-x-2 mb-2">
                          <Ticket className="w-4 h-4 text-yellow-600 dark:text-yellow-400" />
                          <p className="text-xs font-medium text-gray-500 dark:text-gray-400">
                            Tickets Influx
                          </p>
                        </div>
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-2">
                            <Smartphone className="w-3 h-3 text-blue-600 dark:text-blue-400" />
                            <span className="text-xs text-gray-600 dark:text-gray-300">
                              NSAP:
                            </span>
                            <span className="text-sm font-bold text-gray-900 dark:text-white">
                              {index === 0
                                ? "1.6k"
                                : index === 1
                                ? "1.3k"
                                : index === 2
                                ? "2.4k"
                                : "0.9k"}
                            </span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <ServerCog className="w-3 h-3 text-green-600 dark:text-green-400" />
                            <span className="text-xs text-gray-600 dark:text-gray-300">
                              SAP:
                            </span>
                            <span className="text-sm font-bold text-gray-900 dark:text-white">
                              {index === 0
                                ? "0.5k"
                                : index === 1
                                ? "0.5k"
                                : index === 2
                                ? "0.8k"
                                : "0.3k"}
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* P1 - Full Width */}
                    <div className="mt-4">
                      <div className="p-3 rounded-xl bg-white/40 dark:bg-gray-800/20 backdrop-blur-sm border border-gray-200/20 dark:border-gray-600/20">
                        <div className="flex items-center space-x-2 mb-2">
                          <div className="relative">
                            <AlertTriangleIcon className="w-4 h-4 text-red-600 dark:text-purple-400" />
                            {enterprise.metrics.p1 > 0 && (
                              <motion.div
                                animate={{ scale: [1, 1.2, 1] }}
                                transition={{
                                  duration: 1.5,
                                  repeat: Infinity,
                                }}
                                className={`absolute -top-1 -right-1 w-2 h-2 rounded-full ${
                                  enterprise.metrics.p1 > 3
                                    ? "bg-red-500"
                                    : "bg-yellow-500"
                                }`}
                              />
                            )}
                          </div>
                          <p className="text-xs font-medium text-gray-500 dark:text-gray-400">
                            Critical Issues
                          </p>
                        </div>
                        <div className="flex items-center justify-between">
                          <div
                            className="flex items-center space-x-2 cursor-pointer hover:bg-blue-50/70 dark:hover:bg-blue-900/30 rounded-lg p-2 transition-all duration-300 hover:scale-105 hover:shadow-md group/nsap border border-transparent hover:border-blue-200/50 dark:hover:border-blue-700/50"
                            onClick={(e) => {
                              e.stopPropagation();
                              setSelectedNSAPCriticalEnterprise(enterprise);
                              setShowNSAPCriticalModal(true);
                            }}
                          >
                            <Smartphone className="w-3 h-3 text-blue-600 dark:text-blue-400 group-hover/nsap:scale-110 transition-transform duration-300" />
                            <span className="text-xs text-gray-600 dark:text-gray-300 group-hover/nsap:text-blue-700 dark:group-hover/nsap:text-blue-300 transition-colors duration-300">
                              NSAP:
                            </span>
                            <span className="text-sm font-bold text-gray-900 dark:text-white group-hover/nsap:text-blue-800 dark:group-hover/nsap:text-blue-200 transition-colors duration-300">
                              {index === 0
                                ? Math.floor(enterprise.metrics.p1 * 0.7)
                                : index === 1
                                ? Math.floor(enterprise.metrics.p1 * 0.8)
                                : index === 2
                                ? Math.floor(enterprise.metrics.p1 * 0.6)
                                : Math.floor(enterprise.metrics.p1 * 0.9)}
                            </span>
                            <ChevronRight className="w-3 h-3 text-gray-400 group-hover/nsap:text-blue-600 group-hover/nsap:translate-x-1 transition-all duration-300" />
                          </div>
                          <div
                            className="flex items-center space-x-2 cursor-pointer hover:bg-green-50/70 dark:hover:bg-green-900/30 rounded-lg p-2 transition-all duration-300 hover:scale-105 hover:shadow-md group/sap border border-transparent hover:border-green-200/50 dark:hover:border-green-700/50"
                            onClick={(e) => {
                              e.stopPropagation();
                              setSelectedSAPCriticalEnterprise(enterprise);
                              setShowSAPCriticalModal(true);
                            }}
                          >
                            <ServerCog className="w-3 h-3 text-green-600 dark:text-green-400 group-hover/sap:scale-110 transition-transform duration-300" />
                            <span className="text-xs text-gray-600 dark:text-gray-300 group-hover/sap:text-green-700 dark:group-hover/sap:text-green-300 transition-colors duration-300">
                              SAP:
                            </span>
                            <span className="text-sm font-bold text-gray-900 dark:text-white group-hover/sap:text-green-800 dark:group-hover/sap:text-green-200 transition-colors duration-300">
                              {index === 0
                                ? Math.ceil(enterprise.metrics.p1 * 0.3)
                                : index === 1
                                ? Math.ceil(enterprise.metrics.p1 * 0.2)
                                : index === 2
                                ? Math.ceil(enterprise.metrics.p1 * 0.4)
                                : Math.ceil(enterprise.metrics.p1 * 0.1)}
                            </span>
                            <ChevronRight className="w-3 h-3 text-gray-400 group-hover/sap:text-green-600 group-hover/sap:translate-x-1 transition-all duration-300" />
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Click Indicator */}
                    <div className="mt-4 text-center">
                      <p className="text-xs text-gray-500 dark:text-gray-400">
                        {/* Click to view business units */}
                      </p>
                    </div>
                  </div>

                  {/* Decorative Background Elements */}
                  <div className="absolute top-0 right-0 w-32 h-32 opacity-10">
                    <div
                      className={`w-full h-full bg-gradient-to-br ${enterprise.color} rounded-full blur-2xl`}
                    ></div>
                  </div>

                  {/* Status Banner */}
                  <div
                    className={`absolute bottom-0 left-0 right-0 ${statusInfo.indicatorColor} py-1 px-4 rounded-b-3xl`}
                  >
                    <p className="text-xs font-small text-white text-center truncate">
                      {statusInfo.label}
                    </p>
                  </div>
                </div>
              </motion.div>
            );
          })}
        </div>
      </div>
    </section>
  );
}

>>>components/dashboard/HeroSection.tsx
"use client";
import { EnterpriseData, loadEnterpriseData } from "@/lib/dataLoader";
import { ArrowDown, BarChart3, ChevronDown } from "lucide-react";
import { motion } from "motion/react";
import { useEffect, useState } from "react";

export default function HeroSection() {
  const [loading, setLoading] = useState(true);
  const [enterpriseData, setEnterpriseData] = useState<EnterpriseData[]>([]);
  const [showScrollIndicator, setShowScrollIndicator] = useState(true);

  useEffect(() => {
    const handleScroll = () => {
      const scrollY = window.scrollY;
      // Hide scroll indicator after scrolling 200px
      if (scrollY > 200) {
        setShowScrollIndicator(false);
      } else {
        setShowScrollIndicator(true);
      }
    };

    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  useEffect(() => {
    const loadData = async () => {
      try {
        const data = await loadEnterpriseData();
        setEnterpriseData(data);
      } catch (error) {
        console.error("Failed to load enterprise data:", error);
      } finally {
        setLoading(false);
      }
    };

    loadData();
  }, []);

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-950 dark:via-gray-900 dark:to-blue-950/20 flex items-center justify-center">
        <div className="text-center">
          <motion.div
            animate={{ rotate: 360 }}
            transition={{ duration: 2, repeat: Infinity, ease: "linear" }}
            className="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-green-500 rounded-2xl mb-4 shadow-2xl"
          >
            <BarChart3 className="w-8 h-8 text-white" />
          </motion.div>
          <p className="text-lg font-semibold text-gray-600 dark:text-gray-300">
            Loading Enterprise Data...
          </p>
        </div>
      </div>
    );
  }

  return (
    <section
      className="relative py-20 lg:py-32 overflow-hidden bg-cover bg-center bg-no-repeat"
      style={{
        backgroundImage: "url('/images/bg-dashboard2.png')",
        backgroundBlendMode: "lighten",
      }}
    >
      <div className="absolute inset-0 bg-white/30 dark:bg-gray-900/30 backdrop-blur-sm"></div>

      <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <motion.div
          initial={{ opacity: 0, y: 30 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.8 }}
        >
          <div className="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-500 to-green-500 rounded-2xl mb-8 shadow-2xl">
            <BarChart3 className="w-10 h-10 text-white" />
          </div>

          <h1 className="text-4xl lg:text-6xl font-bold text-gray-900 dark:text-white mb-6">
            <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-green-600">
              Dashboard
            </span>
          </h1>

          <p className="text-xl text-gray-600 dark:text-gray-300 mb-8 leading-relaxed max-w-3xl mx-auto">
            Comprehensive enterprise performance tracking across all Cargill
            business units and specialized portfolios
          </p>
        </motion.div>
      </div>
    </section>
  );
}

>>>components/dashboard/StatSection.tsx
import { Building2, Globe, BarChart3, TrendingUp } from "lucide-react";
import { motion } from "motion/react";

export default function StatSection() {
  return (
    <div>
      <section className="py-16 bg-gradient-to-r from-gray-50 to-blue-50 dark:from-gray-900/50 dark:to-blue-900/20">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
            {[
              {
                icon: Building2,
                number: "4",
                label: "Enterprise Units",
                desc: "Major business divisions",
              },
              {
                icon: Globe,
                number: "16",
                label: "Business Units",
                desc: "Specialized operations",
              },
              {
                icon: BarChart3,
                number: "70+",
                label: "Countries",
                desc: "Global presence",
              },
              {
                icon: TrendingUp,
                number: "24/7",
                label: "Monitoring",
                desc: "Real-time tracking",
              },
            ].map((stat, index) => (
              <motion.div
                key={stat.label}
                initial={{ opacity: 0, y: 20 }}
                whileInView={{ opacity: 1, y: 0 }}
                viewport={{ once: true }}
                transition={{ duration: 0.6, delay: index * 0.1 }}
                className="text-center"
              >
                <div className="inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-blue-500 to-green-500 rounded-xl mb-4 shadow-lg">
                  <stat.icon className="w-6 h-6 text-white" />
                </div>
                <h3 className="text-3xl font-bold text-gray-900 dark:text-white mb-2">
                  {stat.number}
                </h3>
                <p className="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">
                  {stat.label}
                </p>
                <p className="text-xs text-gray-500 dark:text-gray-400">
                  {stat.desc}
                </p>
              </motion.div>
            ))}
          </div>
        </div>
      </section>
    </div>
  );
}

>>>components/dashboard/ValueSavings.tsx
"use client";

import React, { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";
import {
  DollarSign,
  HandCoins,
  Scale,
  Calendar,
  BarChart3,
  Activity,
  X,
  ChevronDown,
  ChevronRight,
} from "lucide-react";
import Image from "next/image";

interface FiscalYearData {
  year: string;
  costAvoidance: string;
  costAvoidanceBenefits: string;
  riskAvoidance?: string;
  riskAvoidanceBenefits?: string;
  costSavings: string;
  costSavingsBenefits: string;
}
const ValueSavings = () => {
  const [hoveredMetric, setHoveredMetric] = useState<string | null>(null);
  const [showFiscalYearModal, setShowFiscalYearModal] =
    useState<boolean>(false);
  const [showBenefitsModal, setShowBenefitsModal] = useState<boolean>(false);
  const [showFYSummaryModal, setShowFYSummaryModal] = useState<boolean>(false);
  const [selectedMetric, setSelectedMetric] = useState<string | null>(null);
  const [selectedYearData, setSelectedYearData] = useState<{
    year: string;
    metric: string;
    value: string;
    benefits: string;
  } | null>(null);

  // Handler to close fiscal year modal without affecting benefits modal
  const closeFiscalYearModal = () => {
    setShowFiscalYearModal(false);
    // Don't close benefits modal - let it remain open if it was opened
  };

  // Handler to close both modals (reset all state)
  const closeAllModals = () => {
    setShowFiscalYearModal(false);
    setShowBenefitsModal(false);
    setSelectedMetric(null);
    setSelectedYearData(null);
  };

  // Static data with complete business benefits
  const fiscalData: FiscalYearData[] = [
    {
      year: "FY 2025 - 2026 (Q1)",
      costAvoidance: "$0.43M",
      costAvoidanceBenefits:
        "License optimization: Menti meter application. IT asset utilization and reduce capital expenditure – OSC Infra. Software upgrade & configuration management – Plant workstations. Process automation – SAP finance.",
      riskAvoidance: "$13.2M",
      riskAvoidanceBenefits:
        "NA ERPF-NIS application: Invoice issue averted. FXTE application: Performance improvement. SAP TCC: New business requirement payment term. CBS expense tool: Multi-lingual export enhancement in LATAM. iFIX SCADA failover risk mitigation in Chicago site.",
      costSavings: "$0.24M",
      costSavingsBenefits:
        "Lotus notes infra optimization activities FY242-25. Vendor cost elimination.",
    },
    {
      year: "FY 2024 - 2025",
      costAvoidance: "$0.3M",
      costAvoidanceBenefits:
        "License Optimizations - Hubble License, Mentimeter. Uniwin - Monitoring Alert to reduce time. iGMS – Application Monitoring. HDFS Directories, Files & Tables Clean up.",
      riskAvoidance: "$42.4M",
      riskAvoidanceBenefits:
        "Audit Logs for contract Report. SAP - TC2 Tower | ERS Invoice Settlement. SAP - TC2 Tower | BOL Printing. Lynx Unavailability of Report – Business Improvements. Remote Shipping – Business Improvements.",
      costSavings: "",
      costSavingsBenefits: "",
    },
    {
      year: "FY 2023 - 2024",
      costAvoidance: "$5.7M",
      costAvoidanceBenefits:
        "Effective utilization of Mentimeter, Hubble, Poppulo licenses through regular validation and releasing unused licenses. Improved availability of scale system, avoiding delay in truck wait time. Improved production planning accuracy – Avoiding delay in production & delivery to client. LoadMaster enterprise application upgrade cost avoided for a year. Improved pricing accuracy for ingredient cost (Feed formulation).",
      riskAvoidance: "$24.9M",
      riskAvoidanceBenefits:
        "Timely signing of contract documents. Lync – Cornucopia – Savigent sync issue fixed. Remote shipping application availability – Peak season preparation through proactive measures, preventing downtime. Regulatory and Compliance - Fixed the Lynx contract verbiage for Kansas site and avoided license deactivation. Freezer lot date correction.",
      costSavings: "$0.2M",
      costSavingsBenefits:
        "By optimization and elimination of process delay due to high memory consumption, reduced the memory estimates and improved performance of CDP platform. ~20% reduction in service request for Enablon application via automation.",
    },
    {
      year: "FY 2022 - 2023",
      costAvoidance: "$1.9M",
      costAvoidanceBenefits:
        "Remote Shipping – Sale Order Processing streamline. Compliance Fee Avoided. Late payment fee Avoided ($20,000,000 – worth of settlement amount). Russian Government Compliance regulation Adherence. Delay in Fulfilling Orders.",
      riskAvoidance: "$9.1M",
      riskAvoidanceBenefits:
        "DocuSign Contract Signature – Compliance Adherence ($3M - per site impact). Avoided plant downtime. Elimination of manual efforts. Improved Freight settlement document posting.",
      costSavings: "$0.6M",
      costSavingsBenefits:
        "Truck Load/Unload Delays Reduced – Uniwin OSC. Improved poultry farmers Process:- Digital (Poultry KWI). Delay in Settlement reduced (Cornucopia). License Optimization (Brill, GTOS EMEA, Hubble).",
    },
    {
      year: "FY 2021 - 2022",
      costAvoidance: "$3M",
      costAvoidanceBenefits:
        "Ontime Shipment – Cocoa Beans. Storage cost and Late shipment fees avoided. MADJV – New user onboarding (eliminated 3 months of Manual effort). Ontime Order availability. Ingredient Summary Automation.",
      riskAvoidance: "$18M",
      riskAvoidanceBenefits:
        "Pallet Reset fix reduced shipping delays. Ontime Unload Units sent to Grain and Oil Seed facilities – eliminated later customer payments. End client Rework and manual effort avoided resulting in better thruput. Três Lagoas factory plant. For Biodiesel Certificate of Analysis (CoA) had risks because of compliance data in the reports. Enabling Users to update the credit limit of super customers / child customers on their own without IT intervention which helps in the on-time processing of Sales Order.",
      costSavings: "$0.8M",
      costSavingsBenefits:
        "MADJV – New user onboarding (eliminated 3 months of Manual effort). License Clean-Up. Data display and manual calculation in month end reports for FTS. Paper consumption reduction.",
    },
    {
      year: "FY 2020 - 2021",
      costAvoidance: "$57.6M",
      costAvoidanceBenefits:
        "Avoided Market Trade loss / Volatility. Load/Unload disruption avoided. Uninterrupted business by timely contract creation and settlement.",
      costSavings: "$17.9M",
      costSavingsBenefits:
        "License optimization. Missing loads and outages avoided in crush plants. ASN and USDA MPR Report Fees / penalty avoidance.",
    },
  ];

  // Calculate totals
  const parseValue = (value: string): number => {
    if (!value) return 0;
    const numStr = value.replace(/[$MK]/g, "");
    const num = parseFloat(numStr);
    if (value.includes("M")) return num * 1000000;
    if (value.includes("K")) return num * 1000;
    return num;
  };

  const formatValue = (value: number): string => {
    if (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;
    if (value >= 1000) return `$${(value / 1000).toFixed(0)}K`;
    return `$${value.toFixed(0)}`;
  };

  const totalCostAvoidance = fiscalData.reduce(
    (sum, data) => sum + parseValue(data.costAvoidance),
    0
  );
  const totalRiskAvoidance = fiscalData.reduce(
    (sum, data) => sum + parseValue(data.riskAvoidance || ""),
    0
  );
  const totalCostSavings = fiscalData.reduce(
    (sum, data) => sum + parseValue(data.costSavings),
    0
  );
  const grandTotal = totalCostAvoidance + totalRiskAvoidance + totalCostSavings;

  return (
    <section className="py-16 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:via-gray-800 dark:to-green-900/20">
      <div className="max-w-7xl mx-auto">
        {/* Section Header */}
        <motion.div
          initial={{ opacity: 0, y: 30 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6 }}
          className="text-center mb-12"
        >
          <h2 className="text-4xl font-bold text-gray-900 dark:text-white mb-4">
            Value Capture Overview
          </h2>
          <p className="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
            Track our financial impact across fiscal years with comprehensive
            cost savings, avoidance metrics, and risk mitigation achievements.
          </p>
        </motion.div>

        {/* Main Metric Cards with Dropdowns */}
        <motion.div
          initial={{ opacity: 0, y: 40 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6, delay: 0.2 }}
          className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12"
        >
          {/* Cost Savings Card */}
          <div className="bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-2xl shadow-xl border border-green-200/50 dark:border-green-700/50">
            <div
              className="p-4 cursor-pointer hover:bg-green-50/50 dark:hover:bg-green-900/20 transition-all duration-300 rounded-2xl"
              onClick={() => {
                setSelectedMetric("costSavings");
                setShowFiscalYearModal(true);
              }}
              onMouseEnter={() => setHoveredMetric("costSavings")}
              onMouseLeave={() => setHoveredMetric(null)}
            >
              <div className="flex flex-col items-center text-center">
                <div className="bg-gradient-to-r from-green-500 to-green-600 rounded-xl mb-3">
                  <Image
                    src="/images/cost-avoid.jpeg"
                    alt="Cost Savings"
                    width={48}
                    height={48}
                    className="rounded"
                  />
                </div>
                <motion.div
                  animate={
                    hoveredMetric === "costSavings"
                      ? { scale: 1.05 }
                      : { scale: 1 }
                  }
                  transition={{ duration: 0.2 }}
                >
                  <p className="text-2xl font-bold text-green-600 dark:text-green-400 mb-2">
                    {formatValue(totalCostSavings)}
                  </p>
                </motion.div>
                <h3 className="text-sm font-bold text-gray-900 dark:text-white mb-1">
                  Cost Savings
                </h3>
                <p className="text-xs text-gray-500 dark:text-gray-400">
                  Click to view by fiscal year
                </p>
              </div>
            </div>
          </div>

          {/* Risk Avoidance Card */}
          <div className="bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-2xl shadow-xl border border-blue-200/50 dark:border-blue-700/50">
            <div
              className="p-4 cursor-pointer hover:bg-blue-50/50 dark:hover:bg-blue-900/20 transition-all duration-300 rounded-2xl"
              onClick={() => {
                setSelectedMetric("riskAvoidance");
                setShowFiscalYearModal(true);
              }}
              onMouseEnter={() => setHoveredMetric("riskAvoidance")}
              onMouseLeave={() => setHoveredMetric(null)}
            >
              <div className="flex flex-col items-center text-center">
                <div className="p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl mb-3">
                  <Scale className="w-6 h-6 text-white" />
                </div>
                <motion.div
                  animate={
                    hoveredMetric === "riskAvoidance"
                      ? { scale: 1.05 }
                      : { scale: 1 }
                  }
                  transition={{ duration: 0.2 }}
                >
                  <p className="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2">
                    {formatValue(totalRiskAvoidance)}
                  </p>
                </motion.div>
                <h3 className="text-sm font-bold text-gray-900 dark:text-white mb-1">
                  Risk Avoidance
                </h3>
                <p className="text-xs text-gray-500 dark:text-gray-400">
                  Click to view by fiscal year
                </p>
              </div>
            </div>
          </div>

          {/* Cost Avoidance Card */}
          <div className="bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-2xl shadow-xl border border-green-200/50 dark:border-green-700/50">
            <div
              className="p-4 cursor-pointer hover:bg-green-50/50 dark:hover:bg-green-900/20 transition-all duration-300 rounded-2xl"
              onClick={() => {
                setSelectedMetric("costAvoidance");
                setShowFiscalYearModal(true);
              }}
              onMouseEnter={() => setHoveredMetric("costAvoidance")}
              onMouseLeave={() => setHoveredMetric(null)}
            >
              <div className="flex flex-col items-center text-center">
                <div className="p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl mb-3">
                  <HandCoins className="w-6 h-6 text-white" />
                </div>
                <motion.div
                  animate={
                    hoveredMetric === "costAvoidance"
                      ? { scale: 1.05 }
                      : { scale: 1 }
                  }
                  transition={{ duration: 0.2 }}
                >
                  <p className="text-2xl font-bold text-green-600 dark:text-green-400 mb-2">
                    {formatValue(totalCostAvoidance)}
                  </p>
                </motion.div>
                <h3 className="text-sm font-bold text-gray-900 dark:text-white mb-1">
                  Cost Avoidance
                </h3>
                <p className="text-xs text-gray-500 dark:text-gray-400">
                  Click to view by fiscal year
                </p>
              </div>
            </div>
          </div>
          {/* Grand Total Summary */}
          <div
            className="bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl transition-all duration-300"
            onClick={() => setShowFYSummaryModal(true)}
          >
            <div className="p-4 text-center">
              <div className="flex flex-col items-center">
                <div className="p-3 bg-white/20 backdrop-blur-sm rounded-xl mb-3">
                  <BarChart3 className="w-6 h-6 text-white" />
                </div>
                <p className="text-2xl font-bold text-white mb-2">
                  {formatValue(grandTotal)}
                </p>
                <h3 className="text-sm font-bold text-white/90 mb-1">
                  Total Value Captured
                </h3>
                <p className="text-xs text-white/70">
                  Click to view FY summary
                </p>
              </div>
            </div>
          </div>
        </motion.div>
      </div>

      {/* Fiscal Year Selection Modal */}
      {showFiscalYearModal && selectedMetric && (
        <div
          className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-black/50"
          onClick={closeFiscalYearModal}
        >
          <motion.div
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.9 }}
            transition={{ duration: 0.3 }}
            className="relative bg-white dark:bg-gray-800 backdrop-blur-xl rounded-2xl shadow-2xl max-w-4xl max-h-[90vh] overflow-hidden w-full mx-4 border border-white/20 dark:border-gray-700/50"
            onClick={(e) => e.stopPropagation()}
          >
            {/* Close Button */}
            <button
              onClick={closeFiscalYearModal}
              className="absolute top-3 right-3 z-10 bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-1.5 transition-all duration-200 backdrop-blur-sm"
            >
              <X className="w-4 h-4" />
            </button>

            {/* Modal Header */}
            <div
              className={`px-4 py-3 ${
                selectedMetric === "costAvoidance"
                  ? "bg-gradient-to-r from-green-500 to-emerald-600"
                  : selectedMetric === "riskAvoidance"
                  ? "bg-gradient-to-r from-blue-500 to-indigo-600"
                  : "bg-gradient-to-r from-green-500 to-green-600"
              }`}
            >
              <h3 className="text-lg font-semibold text-white flex items-center">
                {selectedMetric === "costAvoidance" && (
                  <HandCoins className="w-5 h-5 mr-2" />
                )}
                {selectedMetric === "riskAvoidance" && (
                  <Scale className="w-5 h-5 mr-2" />
                )}
                {selectedMetric === "costSavings" && (
                  <Image
                    src="/images/cost-avoid.jpeg"
                    alt="Cost Savings"
                    width={24}
                    height={24}
                    className="rounded mr-2"
                  />
                )}
                {selectedMetric === "costAvoidance" && "Cost Avoidance"}
                {selectedMetric === "riskAvoidance" && "Risk Avoidance"}
                {selectedMetric === "costSavings" && "Cost Savings"} by Fiscal
                Year
              </h3>
              <p className="text-white/80 text-xs mt-1">
                Select a fiscal year to view detailed business benefits
              </p>
            </div>

            {/* Modal Content */}
            <div className="p-3 max-h-[65vh] overflow-y-auto">
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                {fiscalData.map((data, index) => {
                  const hasData =
                    selectedMetric === "costAvoidance"
                      ? data.costAvoidance
                      : selectedMetric === "riskAvoidance"
                      ? data.riskAvoidance
                      : data.costSavings;

                  if (!hasData) return null;

                  return (
                    <motion.div
                      key={`${selectedMetric}-${index}`}
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ duration: 0.3, delay: index * 0.1 }}
                      className={`p-3 rounded-md cursor-pointer transition-all duration-200 ${
                        selectedMetric === "costAvoidance"
                          ? "bg-green-50/50 dark:bg-green-900/10 hover:bg-green-100/50 dark:hover:bg-green-900/20 border border-green-200/50 dark:border-green-700/50"
                          : selectedMetric === "riskAvoidance"
                          ? "bg-blue-50/50 dark:bg-blue-900/10 hover:bg-blue-100/50 dark:hover:bg-blue-900/20 border border-blue-200/50 dark:border-blue-700/50"
                          : "bg-green-50/50 dark:bg-green-900/10 hover:bg-green-100/50 dark:hover:bg-green-900/20 border border-green-200/50 dark:border-green-700/50"
                      }`}
                      onClick={() => {
                        const metric =
                          selectedMetric === "costAvoidance"
                            ? "Cost Avoidance"
                            : selectedMetric === "riskAvoidance"
                            ? "Risk Avoidance"
                            : "Cost Savings";
                        const value =
                          selectedMetric === "costAvoidance"
                            ? data.costAvoidance
                            : selectedMetric === "riskAvoidance"
                            ? data.riskAvoidance!
                            : data.costSavings;
                        const benefits =
                          selectedMetric === "costAvoidance"
                            ? data.costAvoidanceBenefits
                            : selectedMetric === "riskAvoidance"
                            ? data.riskAvoidanceBenefits!
                            : data.costSavingsBenefits;

                        setSelectedYearData({
                          year: data.year,
                          metric,
                          value,
                          benefits,
                        });
                        setShowBenefitsModal(true);
                      }}
                    >
                      <div className="flex items-center justify-between mb-2">
                        <div className="flex items-center space-x-2">
                          <Calendar
                            className={`w-4 h-4 ${
                              selectedMetric === "costAvoidance"
                                ? "text-green-600 dark:text-green-400"
                                : selectedMetric === "riskAvoidance"
                                ? "text-blue-600 dark:text-blue-400"
                                : "text-green-600 dark:text-green-400"
                            }`}
                          />
                          <span className="font-medium text-gray-900 dark:text-white text-sm">
                            {data.year}
                          </span>
                        </div>
                        <ChevronRight className="w-4 h-4 text-gray-400" />
                      </div>
                      <div className="text-center">
                        <p
                          className={`text-lg font-bold ${
                            selectedMetric === "costAvoidance"
                              ? "text-green-600 dark:text-green-400"
                              : selectedMetric === "riskAvoidance"
                              ? "text-blue-600 dark:text-blue-400"
                              : "text-green-600 dark:text-green-400"
                          }`}
                        >
                          {hasData}
                        </p>
                      </div>
                    </motion.div>
                  );
                })}
              </div>
            </div>
          </motion.div>
        </div>
      )}

      {/* Modal for Business Benefits */}
      {showBenefitsModal && selectedYearData && (
        <div
          className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-black/50"
          onClick={() => setShowBenefitsModal(false)}
        >
          <motion.div
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.9 }}
            transition={{ duration: 0.3 }}
            className="relative bg-white dark:bg-gray-800 backdrop-blur-xl rounded-2xl shadow-2xl max-w-4xl max-h-[90vh] overflow-hidden w-full mx-4 border border-white/20 dark:border-gray-700/50"
            onClick={(e) => e.stopPropagation()}
          >
            {/* Back and Close Buttons */}
            <div className="absolute top-3 right-3 z-10 flex space-x-1">
              {/* Back Button */}
              <button
                onClick={() => {
                  setShowBenefitsModal(false);
                  setShowFiscalYearModal(true);
                }}
                className="bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-1.5 transition-all duration-200 backdrop-blur-sm"
                title="Back to Fiscal Year Selection"
              >
                <ChevronDown className="w-4 h-4 rotate-90" />
              </button>
              {/* Close Button */}
            </div>

            {/* Modal Header */}
            <div
              className={`px-4 py-3 ${
                selectedYearData.metric === "Cost Avoidance"
                  ? "bg-gradient-to-r from-green-500 to-emerald-600"
                  : selectedYearData.metric === "Risk Avoidance"
                  ? "bg-gradient-to-r from-blue-500 to-indigo-600"
                  : "bg-gradient-to-r from-green-500 to-green-600"
              }`}
            >
              <h3 className="text-lg font-semibold text-white flex items-center">
                {selectedYearData.metric === "Cost Avoidance" && (
                  <HandCoins className="w-5 h-5 mr-2" />
                )}
                {selectedYearData.metric === "Risk Avoidance" && (
                  <Scale className="w-5 h-5 mr-2" />
                )}
                {selectedYearData.metric === "Cost Savings" && (
                  <Image
                    src="/images/cost-avoid.jpeg"
                    alt="Cost Savings"
                    width={20}
                    height={20}
                    className="rounded mr-2"
                  />
                )}
                {selectedYearData.year} - {selectedYearData.metric}
              </h3>
              <p className="text-white/80 text-xs mt-1">
                Value:{" "}
                <span className="font-medium">{selectedYearData.value}</span>
              </p>
            </div>

            {/* Modal Content */}
            <div className="p-3 max-h-[65vh] overflow-y-auto">
              <div
                className={`rounded-md p-3 border-l-4 ${
                  selectedYearData.metric === "Cost Avoidance"
                    ? "bg-green-50 dark:bg-green-900/20 border-green-500"
                    : selectedYearData.metric === "Risk Avoidance"
                    ? "bg-blue-50 dark:bg-blue-900/20 border-blue-500"
                    : "bg-green-50 dark:bg-green-900/20 border-green-500"
                }`}
              >
                <div className="mb-2">
                  <h4
                    className={`text-base font-semibold mb-2 ${
                      selectedYearData.metric === "Cost Avoidance"
                        ? "text-green-800 dark:text-green-200"
                        : selectedYearData.metric === "Risk Avoidance"
                        ? "text-blue-800 dark:text-blue-200"
                        : "text-green-800 dark:text-green-200"
                    }`}
                  >
                    Business Benefits & Impact
                  </h4>
                </div>

                <ul
                  className={`text-xs leading-relaxed space-y-2 ${
                    selectedYearData.metric === "Cost Avoidance"
                      ? "text-green-700 dark:text-green-200"
                      : selectedYearData.metric === "Risk Avoidance"
                      ? "text-blue-700 dark:text-blue-200"
                      : "text-green-700 dark:text-green-200"
                  }`}
                >
                  {selectedYearData.benefits
                    .split(".")
                    .filter((benefit: string) => benefit.trim())
                    .map((benefit: string, index: number) => (
                      <li key={index} className="flex items-start">
                        <span
                          className={`mr-3 mt-1 w-2 h-2 rounded-full flex-shrink-0 ${
                            selectedYearData.metric === "Cost Avoidance"
                              ? "bg-green-600 dark:bg-green-400"
                              : selectedYearData.metric === "Risk Avoidance"
                              ? "bg-blue-600 dark:bg-blue-400"
                              : "bg-green-600 dark:bg-green-400"
                          }`}
                        />
                        <span className="flex-1">{benefit.trim()}</span>
                      </li>
                    ))}
                </ul>

                {/* Value Summary */}
                <div className="mt-6 pt-4 border-t border-gray-200 dark:border-gray-600">
                  <div className="flex items-center justify-between">
                    <span className="text-lg font-semibold text-gray-800 dark:text-gray-200">
                      Total {selectedYearData.metric} Value:
                    </span>
                    <span
                      className={`text-2xl font-bold ${
                        selectedYearData.metric === "Cost Avoidance"
                          ? "text-green-600 dark:text-green-400"
                          : selectedYearData.metric === "Risk Avoidance"
                          ? "text-blue-600 dark:text-blue-400"
                          : "text-green-600 dark:text-green-400"
                      }`}
                    >
                      {selectedYearData.value}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </motion.div>
        </div>
      )}

      {/* FY Summary Modal */}
      {showFYSummaryModal && (
        <div
          className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-black/50"
          onClick={() => setShowFYSummaryModal(false)}
        >
          <motion.div
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.9 }}
            transition={{ duration: 0.3 }}
            className="relative bg-white dark:bg-gray-800 backdrop-blur-xl rounded-xl shadow-2xl max-w-4xl max-h-[90vh] overflow-hidden w-full mx-4 border border-white/20 dark:border-gray-700/50"
            onClick={(e) => e.stopPropagation()}
          >
            {/* Close Button */}
            <button
              onClick={() => setShowFYSummaryModal(false)}
              className="absolute top-3 right-3 z-10 bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-1.5 transition-all duration-200 backdrop-blur-sm"
            >
              <X className="w-4 h-4" />
            </button>

            {/* Modal Header */}
            <div className="bg-gradient-to-r from-blue-400 via-blue-500 to-indigo-500 px-4 py-3">
              <h3 className="text-lg font-semibold text-white flex items-center">
                <BarChart3 className="w-5 h-5 mr-2" />
                Fiscal Year Summary Overview
              </h3>
              <p className="text-white/80 text-xs mt-1">
                Complete financial impact summary across all fiscal years
              </p>
            </div>

            {/* Modal Content - Bar Charts */}
            <div
              className="p-6 overflow-auto"
              style={{ maxHeight: "calc(90vh - 100px)" }}
            >
              <div className="space-y-8">
                {/* Cost Savings Line Graph */}
                <div className="bg-gradient-to-br from-green-50 via-emerald-50 to-green-100 dark:from-green-900/30 dark:via-emerald-900/30 dark:to-green-900/20 rounded-2xl p-6 border border-green-200 dark:border-green-700 shadow-xl">
                  <h4 className="text-xl font-bold text-green-800 dark:text-green-200 mb-6 flex items-center">
                    <div className="bg-green-500 rounded-lg mr-3 shadow-lg">
                      <Image
                        src="/images/cost-avoid.jpeg"
                        alt="Cost Savings"
                        width={32}
                        height={32}
                        className="rounded"
                      />
                    </div>
                    Cost Savings by Fiscal Year
                  </h4>
                  <div className="relative h-72 px-6">
                    <svg className="w-full h-full" viewBox="0 0 800 250">
                      {/* Grid lines */}
                      {[0, 1, 2, 3, 4].map((i) => (
                        <line
                          key={`grid-y-${i}`}
                          x1="60"
                          y1={50 + i * 40}
                          x2="740"
                          y2={50 + i * 40}
                          stroke="currentColor"
                          strokeWidth="0.5"
                          className="text-gray-300 dark:text-gray-600"
                          strokeDasharray="2,2"
                        />
                      ))}

                      {/* Y-axis */}
                      <line
                        x1="60"
                        y1="50"
                        x2="60"
                        y2="210"
                        stroke="currentColor"
                        strokeWidth="2"
                        className="text-gray-400 dark:text-gray-500"
                      />

                      {/* X-axis */}
                      <line
                        x1="60"
                        y1="210"
                        x2="740"
                        y2="210"
                        stroke="currentColor"
                        strokeWidth="2"
                        className="text-gray-400 dark:text-gray-500"
                      />

                      {/* Data points and line */}
                      {(() => {
                        const validData = fiscalData
                          .filter((d) => parseValue(d.costSavings) > 0)
                          .reverse();
                        const xStep =
                          validData.length > 1
                            ? 680 / (validData.length - 1)
                            : 0;

                        // Sort data by value for y-axis ranking (lowest to highest)
                        const sortedByValue = [...validData].sort(
                          (a, b) =>
                            parseValue(a.costSavings) -
                            parseValue(b.costSavings)
                        );

                        // Create mapping from original data to y-position based on value rank
                        // Adding +1 to rank to leave space at bottom (position 1 empty, lowest value at position 2)
                        const getYPosition = (data: any) => {
                          const rank = sortedByValue.findIndex(
                            (item) => item === data
                          );
                          return (
                            210 -
                            (rank + 1) * (160 / Math.max(validData.length, 1))
                          );
                        };

                        return (
                          <g>
                            {/* Line path */}
                            {validData.length > 1 && (
                              <motion.path
                                d={`M ${validData
                                  .map((data, index) => {
                                    const x = 60 + index * xStep;
                                    const y = getYPosition(data);
                                    return index === 0
                                      ? `${x},${y}`
                                      : `L ${x},${y}`;
                                  })
                                  .join(" ")}`}
                                fill="none"
                                stroke="url(#costSavingsGradient)"
                                strokeWidth="3"
                                initial={{ pathLength: 0 }}
                                animate={{ pathLength: 1 }}
                                transition={{ duration: 2, ease: "easeInOut" }}
                              />
                            )}

                            {/* Data points */}
                            {validData.map((data, index) => {
                              const x = 60 + index * xStep;
                              const y = getYPosition(data);

                              return (
                                <g key={`cost-savings-point-${index}`}>
                                  {/* Outer glow circle */}
                                  <motion.circle
                                    cx={x}
                                    cy={y}
                                    r="10"
                                    fill="url(#costSavingsGradient)"
                                    opacity="0.2"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3,
                                    }}
                                    className="cursor-pointer"
                                  />
                                  {/* Main data point */}
                                  <motion.circle
                                    cx={x}
                                    cy={y}
                                    r="7"
                                    fill="url(#costSavingsGradient)"
                                    stroke="white"
                                    strokeWidth="3"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3,
                                    }}
                                    className="drop-shadow-lg cursor-pointer hover:scale-125 transition-transform"
                                  />
                                  {/* Inner highlight */}
                                  <motion.circle
                                    cx={x - 1}
                                    cy={y - 1}
                                    r="2"
                                    fill="white"
                                    opacity="0.6"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 0.2,
                                    }}
                                    className="cursor-pointer"
                                  />

                                  {/* Value labels - simple text above points */}
                                  <motion.text
                                    x={x}
                                    y={y - 15}
                                    textAnchor="middle"
                                    className="text-sm font-bold fill-green-700 dark:fill-green-300"
                                    dominantBaseline="middle"
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 0.5,
                                    }}
                                  >
                                    {data.costSavings}
                                  </motion.text>

                                  {/* Year labels */}
                                  <motion.text
                                    x={x}
                                    y={230}
                                    textAnchor="middle"
                                    className="text-xs font-medium fill-gray-600 dark:fill-gray-400"
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 1,
                                    }}
                                  >
                                    {data.year
                                      .replace("FY ", "")
                                      .replace(" - ", "-")
                                      .replace(" (Q1)", "")}
                                  </motion.text>
                                </g>
                              );
                            })}
                          </g>
                        );
                      })()}

                      {/* Gradient definitions */}
                      <defs>
                        <linearGradient
                          id="costSavingsGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="0%"
                        >
                          <stop offset="0%" stopColor="#10b981" />
                          <stop offset="100%" stopColor="#059669" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                </div>

                {/* Risk Avoidance Line Graph */}
                <div className="bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 dark:from-blue-900/30 dark:via-indigo-900/30 dark:to-blue-900/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-700 shadow-xl">
                  <h4 className="text-xl font-bold text-blue-800 dark:text-blue-200 mb-6 flex items-center">
                    <div className="p-2 bg-blue-500 rounded-lg mr-3 shadow-lg">
                      <Scale className="w-6 h-6 text-white" />
                    </div>
                    Risk Avoidance by Fiscal Year
                  </h4>
                  <div className="relative h-72 px-6">
                    <svg className="w-full h-full" viewBox="0 0 800 250">
                      {/* Grid lines */}
                      {[0, 1, 2, 3, 4].map((i) => (
                        <line
                          key={`grid-y-risk-${i}`}
                          x1="60"
                          y1={50 + i * 40}
                          x2="740"
                          y2={50 + i * 40}
                          stroke="currentColor"
                          strokeWidth="0.5"
                          className="text-gray-300 dark:text-gray-600"
                          strokeDasharray="2,2"
                        />
                      ))}

                      {/* Y-axis */}
                      <line
                        x1="60"
                        y1="50"
                        x2="60"
                        y2="210"
                        stroke="currentColor"
                        strokeWidth="2"
                        className="text-gray-400 dark:text-gray-500"
                      />

                      {/* X-axis */}
                      <line
                        x1="60"
                        y1="210"
                        x2="740"
                        y2="210"
                        stroke="currentColor"
                        strokeWidth="2"
                        className="text-gray-400 dark:text-gray-500"
                      />

                      {/* Data points and line */}
                      {(() => {
                        const validData = fiscalData
                          .filter((d) => parseValue(d.riskAvoidance || "") > 0)
                          .reverse();
                        const xStep =
                          validData.length > 1
                            ? 680 / (validData.length - 1)
                            : 0;

                        // Sort data by value for y-axis ranking (lowest to highest)
                        const sortedByValue = [...validData].sort(
                          (a, b) =>
                            parseValue(a.riskAvoidance || "") -
                            parseValue(b.riskAvoidance || "")
                        );

                        // Create mapping from original data to y-position based on value rank
                        // Adding +1 to rank to leave space at bottom (position 1 empty, lowest value at position 2)
                        const getYPosition = (data: any) => {
                          const rank = sortedByValue.findIndex(
                            (item) => item === data
                          );
                          return (
                            210 -
                            (rank + 1) * (160 / Math.max(validData.length, 1))
                          );
                        };

                        return (
                          <g>
                            {/* Line path */}
                            {validData.length > 1 && (
                              <motion.path
                                d={`M ${validData
                                  .map((data, index) => {
                                    const x = 60 + index * xStep;
                                    const y = getYPosition(data);
                                    return index === 0
                                      ? `${x},${y}`
                                      : `L ${x},${y}`;
                                  })
                                  .join(" ")}`}
                                fill="none"
                                stroke="url(#riskAvoidanceGradient)"
                                strokeWidth="3"
                                initial={{ pathLength: 0 }}
                                animate={{ pathLength: 1 }}
                                transition={{ duration: 2, ease: "easeInOut" }}
                              />
                            )}

                            {/* Data points */}
                            {validData.map((data, index) => {
                              const x = 60 + index * xStep;
                              const y = getYPosition(data);

                              return (
                                <g key={`risk-avoidance-point-${index}`}>
                                  {/* Outer glow circle */}
                                  <motion.circle
                                    cx={x}
                                    cy={y}
                                    r="10"
                                    fill="url(#riskAvoidanceGradient)"
                                    opacity="0.2"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3,
                                    }}
                                    className="cursor-pointer"
                                  />
                                  {/* Main data point */}
                                  <motion.circle
                                    cx={x}
                                    cy={y}
                                    r="7"
                                    fill="url(#riskAvoidanceGradient)"
                                    stroke="white"
                                    strokeWidth="3"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3,
                                    }}
                                    className="drop-shadow-lg cursor-pointer hover:scale-125 transition-transform"
                                  />
                                  {/* Inner highlight */}
                                  <motion.circle
                                    cx={x - 1}
                                    cy={y - 1}
                                    r="2"
                                    fill="white"
                                    opacity="0.6"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 0.2,
                                    }}
                                    className="cursor-pointer"
                                  />

                                  {/* Value labels - simple text above points */}
                                  <motion.text
                                    x={x}
                                    y={y - 15}
                                    textAnchor="middle"
                                    className="text-sm font-bold fill-blue-700 dark:fill-blue-300"
                                    dominantBaseline="middle"
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 0.5,
                                    }}
                                  >
                                    {data.riskAvoidance}
                                  </motion.text>

                                  {/* Year labels */}
                                  <motion.text
                                    x={x}
                                    y={230}
                                    textAnchor="middle"
                                    className="text-xs font-medium fill-gray-600 dark:fill-gray-400"
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 1,
                                    }}
                                  >
                                    {data.year
                                      .replace("FY ", "")
                                      .replace(" - ", "-")
                                      .replace(" (Q1)", "")}
                                  </motion.text>
                                </g>
                              );
                            })}
                          </g>
                        );
                      })()}

                      {/* Gradient definitions */}
                      <defs>
                        <linearGradient
                          id="riskAvoidanceGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="0%"
                        >
                          <stop offset="0%" stopColor="#3b82f6" />
                          <stop offset="100%" stopColor="#6366f1" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                </div>

                {/* Cost Avoidance Line Graph */}
                <div className="bg-gradient-to-br from-emerald-50 via-teal-50 to-emerald-100 dark:from-emerald-900/30 dark:via-teal-900/30 dark:to-emerald-900/20 rounded-2xl p-6 border border-emerald-200 dark:border-emerald-700 shadow-xl">
                  <h4 className="text-xl font-bold text-emerald-800 dark:text-emerald-200 mb-6 flex items-center">
                    <div className="p-2 bg-emerald-500 rounded-lg mr-3 shadow-lg">
                      <HandCoins className="w-6 h-6 text-white" />
                    </div>
                    Cost Avoidance by Fiscal Year
                  </h4>
                  <div className="relative h-72 px-6">
                    <svg className="w-full h-full" viewBox="0 0 800 250">
                      {/* Grid lines */}
                      {[0, 1, 2, 3, 4].map((i) => (
                        <line
                          key={`grid-y-cost-${i}`}
                          x1="60"
                          y1={50 + i * 40}
                          x2="740"
                          y2={50 + i * 40}
                          stroke="currentColor"
                          strokeWidth="0.5"
                          className="text-gray-300 dark:text-gray-600"
                          strokeDasharray="2,2"
                        />
                      ))}

                      {/* Y-axis */}
                      <line
                        x1="60"
                        y1="50"
                        x2="60"
                        y2="210"
                        stroke="currentColor"
                        strokeWidth="2"
                        className="text-gray-400 dark:text-gray-500"
                      />

                      {/* X-axis */}
                      <line
                        x1="60"
                        y1="210"
                        x2="740"
                        y2="210"
                        stroke="currentColor"
                        strokeWidth="2"
                        className="text-gray-400 dark:text-gray-500"
                      />

                      {/* Data points and line */}
                      {(() => {
                        const validData = fiscalData
                          .filter((d) => parseValue(d.costAvoidance) > 0)
                          .reverse();
                        const xStep =
                          validData.length > 1
                            ? 680 / (validData.length - 1)
                            : 0;

                        // Sort data by value for y-axis ranking (lowest to highest)
                        const sortedByValue = [...validData].sort(
                          (a, b) =>
                            parseValue(a.costAvoidance) -
                            parseValue(b.costAvoidance)
                        );

                        // Create mapping from original data to y-position based on value rank
                        // Adding +1 to rank to leave space at bottom (position 1 empty, lowest value at position 2)
                        const getYPosition = (data: any) => {
                          const rank = sortedByValue.findIndex(
                            (item) => item === data
                          );
                          return (
                            210 -
                            (rank + 1) * (160 / Math.max(validData.length, 1))
                          );
                        };

                        return (
                          <g>
                            {/* Line path */}
                            {validData.length > 1 && (
                              <motion.path
                                d={`M ${validData
                                  .map((data, index) => {
                                    const x = 60 + index * xStep;
                                    const y = getYPosition(data);
                                    return index === 0
                                      ? `${x},${y}`
                                      : `L ${x},${y}`;
                                  })
                                  .join(" ")}`}
                                fill="none"
                                stroke="url(#costAvoidanceGradient)"
                                strokeWidth="3"
                                initial={{ pathLength: 0 }}
                                animate={{ pathLength: 1 }}
                                transition={{ duration: 2, ease: "easeInOut" }}
                              />
                            )}

                            {/* Data points */}
                            {validData.map((data, index) => {
                              const x = 60 + index * xStep;
                              const y = getYPosition(data);

                              return (
                                <g key={`cost-avoidance-point-${index}`}>
                                  {/* Outer glow circle */}
                                  <motion.circle
                                    cx={x}
                                    cy={y}
                                    r="10"
                                    fill="url(#costAvoidanceGradient)"
                                    opacity="0.2"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3,
                                    }}
                                    className="cursor-pointer"
                                  />
                                  {/* Main data point */}
                                  <motion.circle
                                    cx={x}
                                    cy={y}
                                    r="7"
                                    fill="url(#costAvoidanceGradient)"
                                    stroke="white"
                                    strokeWidth="3"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3,
                                    }}
                                    className="drop-shadow-lg cursor-pointer hover:scale-125 transition-transform"
                                  />
                                  {/* Inner highlight */}
                                  <motion.circle
                                    cx={x - 1}
                                    cy={y - 1}
                                    r="2"
                                    fill="white"
                                    opacity="0.6"
                                    initial={{ scale: 0 }}
                                    animate={{ scale: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 0.2,
                                    }}
                                    className="cursor-pointer"
                                  />

                                  {/* Value labels - simple text above points */}
                                  <motion.text
                                    x={x}
                                    y={y - 15}
                                    textAnchor="middle"
                                    className="text-sm font-bold fill-emerald-700 dark:fill-emerald-300"
                                    dominantBaseline="middle"
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 0.5,
                                    }}
                                  >
                                    {data.costAvoidance}
                                  </motion.text>

                                  {/* Year labels */}
                                  <motion.text
                                    x={x}
                                    y={230}
                                    textAnchor="middle"
                                    className="text-xs font-medium fill-gray-600 dark:fill-gray-400"
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    transition={{
                                      duration: 0.6,
                                      delay: index * 0.3 + 1,
                                    }}
                                  >
                                    {data.year
                                      .replace("FY ", "")
                                      .replace(" - ", "-")
                                      .replace(" (Q1)", "")}
                                  </motion.text>
                                </g>
                              );
                            })}
                          </g>
                        );
                      })()}

                      {/* Gradient definitions */}
                      <defs>
                        <linearGradient
                          id="costAvoidanceGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="0%"
                        >
                          <stop offset="0%" stopColor="#10b981" />
                          <stop offset="100%" stopColor="#14b8a6" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                </div>

                {/* Summary Section */}
                <div className="bg-gradient-to-br from-yellow-50 via-orange-50 to-amber-50 dark:from-yellow-900/30 dark:via-orange-900/30 dark:to-amber-900/20 rounded-2xl p-6 border border-yellow-200 dark:border-yellow-700 shadow-xl">
                  <h4 className="text-xl font-bold text-gray-800 dark:text-gray-200 mb-6 flex items-center">
                    <div className="p-2 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg mr-3 shadow-lg">
                      <BarChart3 className="w-6 h-6 text-white" />
                    </div>
                    Total Value Summary
                  </h4>
                  <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <motion.div
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ duration: 0.6, delay: 0.1 }}
                      className="text-center p-4 bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-green-900/30 rounded-xl shadow-lg border border-green-200 dark:border-green-700 hover:shadow-xl transition-all duration-300"
                    >
                      <p className="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">
                        Total Cost Savings
                      </p>
                      <p className="text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent">
                        {formatValue(totalCostSavings)}
                      </p>
                    </motion.div>
                    <motion.div
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ duration: 0.6, delay: 0.2 }}
                      className="text-center p-4 bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-blue-900/30 rounded-xl shadow-lg border border-blue-200 dark:border-blue-700 hover:shadow-xl transition-all duration-300"
                    >
                      <p className="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">
                        Total Risk Avoidance
                      </p>
                      <p className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
                        {formatValue(totalRiskAvoidance)}
                      </p>
                    </motion.div>
                    <motion.div
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ duration: 0.6, delay: 0.3 }}
                      className="text-center p-4 bg-gradient-to-br from-white to-emerald-50 dark:from-gray-800 dark:to-emerald-900/30 rounded-xl shadow-lg border border-emerald-200 dark:border-emerald-700 hover:shadow-xl transition-all duration-300"
                    >
                      <p className="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">
                        Total Cost Avoidance
                      </p>
                      <p className="text-2xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent">
                        {formatValue(totalCostAvoidance)}
                      </p>
                    </motion.div>
                  </div>
                  <motion.div
                    initial={{ opacity: 0, scale: 0.95 }}
                    animate={{ opacity: 1, scale: 1 }}
                    transition={{ duration: 0.6, delay: 0.4 }}
                    className="text-center mt-6 pt-6 border-t border-gradient-to-r from-yellow-200 to-orange-200 dark:from-yellow-700 dark:to-orange-700"
                  >
                    <p className="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">
                      Grand Total Value Captured
                    </p>
                    <p className="text-3xl font-bold bg-gradient-to-r from-yellow-600 via-orange-600 to-red-600 bg-clip-text text-transparent drop-shadow-sm">
                      {formatValue(grandTotal)}
                    </p>
                    <div className="mt-3 w-24 h-1 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full mx-auto"></div>
                  </motion.div>
                </div>
              </div>
            </div>
          </motion.div>
        </div>
      )}
    </section>
  );
};

export default ValueSavings;

>>>components/dashboard/modals/BusinessUnitModal.tsx
"use client";

import { motion } from "framer-motion";
import { X } from "lucide-react";
import Image from "next/image";
import React from "react";

interface BusinessUnitModalProps {
  showModal: boolean;
  setShowModal: (value: boolean) => void;
  icon: React.ReactNode;
  heading: string;
  additionalInfo: string;
  imageSrc: string;
}

const BusinessUnitModal: React.FC<BusinessUnitModalProps> = ({
  showModal,
  setShowModal,
  icon,
  heading,
  additionalInfo,
  imageSrc,
}) => {
  if (!showModal) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-white/10 dark:bg-gray-900/10">
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        transition={{ duration: 0.3 }}
        className="relative bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-4xl max-h-[90vh] overflow-hidden border border-white/20 dark:border-gray-700/50"
      >
        {/* Close Button */}
        <button
          onClick={() => setShowModal(false)}
          className="absolute top-4 right-4 z-10 bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-2 transition-all duration-200 backdrop-blur-sm"
        >
          <X className="w-6 h-6" />
        </button>

        {/* Modal Header */}
        <div className="bg-gradient-to-r from-purple-500 to-pink-600 px-6 py-4">
          <h3 className="text-xl font-bold text-white flex items-center">
            {icon}
            {heading}
          </h3>
          <p className="text-purple-100 text-sm mt-1">
            Business Process Overview
          </p>
        </div>

        {/* Modal Content */}
        <div className="p-6">
          <div className="relative">
            <Image
              src={imageSrc}
              alt={`${heading} Business Process`}
              width={800}
              height={600}
              className="w-full h-auto rounded-lg shadow-lg"
            />
          </div>

          {/* Additional Info */}
          <div className="mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
            <h4 className="font-semibold text-gray-900 dark:text-white mb-2">
              Business Process Overview
            </h4>
            <p className="text-gray-600 dark:text-gray-300 text-sm">
              {additionalInfo}
            </p>
          </div>
        </div>
      </motion.div>
    </div>
  );
};

export default BusinessUnitModal;

>>>components/dashboard/modals/ContactsModal.tsx
"use client";

import React from "react";
import { motion } from "framer-motion";
import { X, Users, Mail, Phone, MapPin } from "lucide-react";
import { BusinessUnitData } from "@/lib/dataLoader";

interface ContactsModalProps {
  showModal: boolean;
  setShowModal: (value: boolean) => void;
  selectedBusinessUnit: BusinessUnitData | null;
}

interface Contact {
  name: string;
  title: string;
  department: string;
  email: string;
  phone: string;
  location: string;
}

const ContactsModal: React.FC<ContactsModalProps> = ({
  showModal,
  setShowModal,
  selectedBusinessUnit,
}) => {
  if (!showModal) return null;

  // Sample contacts data - this could be moved to props or fetched from an API
  const contacts: Contact[] = [
    {
      name: "M, Anitha(Cognizant)",
      title: "Technical Lead",
      department: "ADM AVM CE Delivery",
      email: "Anitha.M5@cognizant.com",
      phone: "+91 9789014874",
      location: "Chennai, IN",
    },
    {
      name: "Muthumurugan, Rajakumar(Cognizant)",
      title: "Sr. Engineering Manager",
      department: "ADM AVM CE Delivery",
      email: "Rajakumar.M2@cognizant.com",
      phone: "+91 9894106761",
      location: "Chennai, IN",
    },
    {
      name: "Jawakar, Kalpana(Cognizant)",
      title: "Service Manager",
      department: "ADM AVM MLEU Delivery",
      email: "Kalpana.Jawakar@cognizant.com",
      phone: "+91 9840031728",
      location: "Chennai, IN",
    },
    {
      name: "Bathirappan, Charanya(Cognizant)",
      title: "Engagement Delivery Lead",
      department: "ADM AVM MLEU Delivery",
      email: "Charanya.Bathirappan@cognizant.com",
      phone: "+91 9894751305",
      location: "Chennai, IN",
    },
  ];

  return (
    <div
      className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-white/10 dark:bg-gray-900/10"
      onClick={() => setShowModal(false)}
    >
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        transition={{ duration: 0.3 }}
        className="relative bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-4xl max-h-[90vh] overflow-hidden w-full mx-4 border border-white/20 dark:border-gray-700/50"
        onClick={(e) => e.stopPropagation()}
      >
        {/* Close Button */}
        <button
          onClick={() => setShowModal(false)}
          className="absolute top-4 right-4 z-10 bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-2 transition-all duration-200 backdrop-blur-sm"
        >
          <X className="w-6 h-6" />
        </button>

        {/* Modal Header */}
        <div className="bg-gradient-to-r from-blue-500 to-indigo-600 px-6 py-4">
          <h3 className="text-2xl font-bold text-white flex items-center">
            <Users className="w-8 h-8 mr-3" />
            {selectedBusinessUnit
              ? `${selectedBusinessUnit.name} Contacts`
              : "Enterprise Contacts"}
          </h3>
          <p className="text-white/80 text-sm mt-1">
            Key contacts and team members
          </p>
        </div>

        {/* Modal Content */}
        <div className="p-6 max-h-[70vh] overflow-y-auto">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {contacts.map((contact, contactIndex) => (
              <motion.div
                key={contactIndex}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 0.3, delay: contactIndex * 0.1 }}
                className="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-300 border border-gray-200 dark:border-gray-600"
              >
                {/* Contact Header */}
                <div className="flex items-center space-x-3 mb-3">
                  <div className="w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center text-white font-bold text-lg">
                    {contact.name
                      .split(" ")
                      .map((n) => n[0])
                      .join("")}
                  </div>
                  <div>
                    <h4 className="font-semibold text-gray-900 dark:text-white">
                      {contact.name}
                    </h4>
                    <p className="text-sm text-gray-600 dark:text-gray-300">
                      {contact.title}
                    </p>
                    <p className="text-xs text-blue-600 dark:text-blue-400">
                      {contact.department}
                    </p>
                  </div>
                </div>

                {/* Contact Details */}
                <div className="space-y-2">
                  <div className="flex items-center space-x-2 text-sm">
                    <Mail className="w-4 h-4 text-gray-500" />
                    <a
                      href={`mailto:${contact.email}`}
                      className="text-blue-600 dark:text-blue-400 hover:underline"
                    >
                      {contact.email}
                    </a>
                  </div>
                  <div className="flex items-center space-x-2 text-sm">
                    <Phone className="w-4 h-4 text-gray-500" />
                    <a
                      href={`tel:${contact.phone}`}
                      className="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400"
                    >
                      {contact.phone}
                    </a>
                  </div>
                  <div className="flex items-center space-x-2 text-sm">
                    <MapPin className="w-4 h-4 text-gray-500" />
                    <span className="text-gray-700 dark:text-gray-300">
                      {contact.location}
                    </span>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </div>
      </motion.div>
    </div>
  );
};

export default ContactsModal;

>>>components/dashboard/modals/EnterpriseModal.tsx
import { EnterpriseData } from "@/lib/dataLoader";
import { motion } from "framer-motion";
import {
  X,
  Smartphone,
  DollarSign,
  AlertTriangle,
  Lightbulb,
  Star,
  ArrowRight,
} from "lucide-react";
import Link from "next/link";

interface BusinessUnitData {
  name: string;
  apps: number;
  valueSavings: number;
  vulnerabilities: number;
  innovations: number;
  p1: number;
}

interface EnterpriseModalProps {
  enterprise: EnterpriseData;
  onClose: () => void;
}

export const EnterpriseModal: React.FC<EnterpriseModalProps> = ({
  enterprise,
  onClose,
}) => {
  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm">
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        transition={{ duration: 0.3 }}
        className="relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl max-h-[90vh] overflow-y-auto w-full"
      >
        {/* Close Button */}
        <button
          onClick={onClose}
          className="absolute top-4 right-4 z-10 bg-black bg-opacity-20 hover:bg-opacity-40 text-white rounded-full p-2 transition-all duration-200"
        >
          <X className="w-6 h-6" />
        </button>

        {/* Header */}
        <div className="bg-gradient-to-r from-purple-500 to-pink-600 px-6 py-4 rounded-t-2xl">
          <h3 className="text-xl font-bold text-white">{enterprise.title}</h3>
          <p className="text-purple-100 text-sm mt-1">
            Business Units Overview
          </p>
        </div>

        {/* Business Units */}
        <div className="p-6">
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            {enterprise.items.map((item, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ duration: 0.3, delay: index * 0.05 }}
                className="bg-white/50 dark:bg-gray-800/30 backdrop-blur-sm border border-gray-200/30 dark:border-gray-600/30 hover:bg-white/70 dark:hover:bg-gray-700/40 transition-all duration-300 rounded-xl overflow-hidden cursor-pointer"
              >
                {/* Header */}
                <div className="flex items-center justify-between p-3 border-b border-gray-200/30 dark:border-gray-600/30">
                  <span className="text-sm font-medium text-gray-700 dark:text-gray-200">
                    {item.name}
                  </span>
                  <Link href={`/enterprises/${enterprise.id}`}>
                    <ArrowRight className="w-4 h-4 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300" />
                  </Link>
                </div>

                {/* Metrics */}
                <div className="p-3 grid grid-cols-5 gap-2 text-center text-xs font-bold text-gray-900 dark:text-white">
                  <div className="flex flex-col items-center">
                    <Smartphone className="w-4 h-4 text-blue-600 dark:text-blue-400 mb-1" />
                    {item.apps}
                  </div>
                  <div className="flex flex-col items-center">
                    <DollarSign className="w-4 h-4 text-green-600 dark:text-green-400 mb-1" />
                    {item.valueSavings}
                  </div>
                  <div className="flex flex-col items-center relative">
                    <AlertTriangle className="w-4 h-4 text-red-600 dark:text-red-400 mb-1" />
                    {item.vulnerabilities}
                    {item.vulnerabilities > 25 && (
                      <motion.div
                        animate={{ scale: [1, 1.2, 1] }}
                        transition={{ duration: 1.5, repeat: Infinity }}
                        className={`absolute -top-1 -right-1 w-2 h-2 rounded-full ${
                          item.vulnerabilities > 50
                            ? "bg-red-500"
                            : "bg-yellow-500"
                        }`}
                      />
                    )}
                  </div>
                  <div className="flex flex-col items-center">
                    <Lightbulb className="w-4 h-4 text-yellow-600 dark:text-yellow-400 mb-1" />
                    {item.innovations}
                  </div>
                  <div className="flex flex-col items-center relative">
                    <Star className="w-4 h-4 text-purple-600 dark:text-purple-400 mb-1" />
                    {item.p1}
                    {item.p1 > 0 && (
                      <motion.div
                        animate={{ scale: [1, 1.2, 1] }}
                        transition={{ duration: 1.5, repeat: Infinity }}
                        className={`absolute -top-1 -right-1 w-2 h-2 rounded-full ${
                          item.p1 > 2 ? "bg-red-500" : "bg-yellow-500"
                        }`}
                      />
                    )}
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </div>
      </motion.div>
    </div>
  );
};

>>>components/dashboard/modals/NSAPCriticalModal.tsx
"use client";

import React from "react";
import { motion } from "motion/react";
import { X, Smartphone, BarChart3 } from "lucide-react";
import { EnterpriseData } from "@/lib/dataLoader";

interface NSAPCriticalModalProps {
  showModal: boolean;
  setShowModal: (show: boolean) => void;
  selectedEnterprise: EnterpriseData | null;
}

export default function NSAPCriticalModal({
  showModal,
  setShowModal,
  selectedEnterprise,
}: NSAPCriticalModalProps) {
  if (!showModal || !selectedEnterprise) {
    return null;
  }

  return (
    <div
      className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-white/10 dark:bg-gray-900/10"
      onClick={() => setShowModal(false)}
    >
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        transition={{ duration: 0.3 }}
        className="relative bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-5xl max-h-[90vh] overflow-hidden w-full mx-4 border border-white/20 dark:border-gray-700/50"
        onClick={(e) => e.stopPropagation()}
      >
        {/* Close Button */}
        <button
          onClick={() => setShowModal(false)}
          className="absolute top-4 right-4 z-50 bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-2 transition-all duration-200 backdrop-blur-sm shadow-lg"
          style={{ zIndex: 9999 }}
        >
          <X className="w-6 h-6" />
        </button>

        {/* Modal Header */}
        <div className="bg-gradient-to-r from-blue-600 to-blue-500 px-6 py-4 relative overflow-hidden">
          <div className="absolute inset-0 bg-gradient-to-r from-blue-600/20 to-blue-700/20"></div>
          <div className="relative z-10">
            <h3 className="text-2xl font-bold text-white flex items-center">
              <div className="relative mr-3">
                <Smartphone className="w-8 h-8" />
              </div>
              {selectedEnterprise.title} - NSAP Critical Issues
            </h3>
            <p className="text-white/80 text-sm mt-1">
              Real-time Non-SAP application critical issues and downtime
              monitoring
            </p>
          </div>
        </div>

        {/* Modal Content */}
        <div className="p-6 max-h-[70vh] overflow-y-auto">
          {/* Issues List */}
          <div className="space-y-4">
            <h4 className="text-lg font-semibold text-gray-900 dark:text-white flex items-center">
              <Smartphone className="w-5 h-5 text-blue-600 mr-2" />
              Current NSAP Critical Issues
            </h4>

            <div className="space-y-3">
              {/* Generate sample NSAP issues */}
              {Array.from(
                {
                  length: Math.floor(
                    selectedEnterprise.metrics.p1 *
                      (selectedEnterprise.id === "ag-trading"
                        ? 0.7
                        : selectedEnterprise.id === "food"
                        ? 0.8
                        : selectedEnterprise.id === "specialized"
                        ? 0.6
                        : 0.9)
                  ),
                },
                (_, i) => {
                  const nsapIssueTypes = [
                    {
                      type: "Web Portal Authentication Failure",
                      system: "Customer Portal",
                      severity: "Critical",
                      duration: "2.1h",
                    },
                    {
                      type: "API Gateway Timeout",
                      system: "Integration API",
                      severity: "High",
                      duration: "1.5h",
                    },
                    {
                      type: "Database Connection Pool Exhausted",
                      system: "Application Database",
                      severity: "Critical",
                      duration: "0.8h",
                    },
                    {
                      type: "File Transfer Service Down",
                      system: "FTP Service",
                      severity: "High",
                      duration: "1.2h",
                    },
                    {
                      type: "Email Service Unavailable",
                      system: "SMTP Server",
                      severity: "Medium",
                      duration: "0.6h",
                    },
                  ];
                  const issue = nsapIssueTypes[i % nsapIssueTypes.length];

                  return (
                    <motion.div
                      key={i}
                      initial={{ opacity: 0, x: -20 }}
                      animate={{ opacity: 1, x: 0 }}
                      transition={{ duration: 0.3, delay: i * 0.1 }}
                      className="bg-white dark:bg-gray-700 rounded-xl p-4 border border-gray-200 dark:border-gray-600 hover:shadow-lg transition-all duration-200"
                    >
                      <div className="flex items-center justify-between mb-3">
                        <div className="flex items-center space-x-3">
                          <div
                            className={`w-3 h-3 rounded-full ${
                              issue.severity === "Critical"
                                ? "bg-red-500"
                                : issue.severity === "High"
                                ? "bg-orange-500"
                                : "bg-yellow-500"
                            }`}
                          ></div>
                          <h5 className="font-semibold text-gray-900 dark:text-white">
                            {issue.type}
                          </h5>
                          <span
                            className={`px-2 py-1 rounded-full text-xs font-medium ${
                              issue.severity === "Critical"
                                ? "bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400"
                                : issue.severity === "High"
                                ? "bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400"
                                : "bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400"
                            }`}
                          >
                            {issue.severity}
                          </span>
                        </div>
                        <div className="text-right">
                          <p className="text-sm font-medium text-gray-900 dark:text-white">
                            Downtime: {issue.duration}
                          </p>
                          <p className="text-xs text-gray-500 dark:text-gray-400">
                            Started {(i + 1) * 35}m ago
                          </p>
                        </div>
                      </div>

                      <div className="grid grid-cols-2 gap-4 text-sm">
                        <div>
                          <p className="text-gray-500 dark:text-gray-400">
                            Affected System
                          </p>
                          <p className="font-medium text-gray-900 dark:text-white flex items-center">
                            <Smartphone className="w-4 h-4 text-blue-600 mr-1" />
                            {issue.system}
                          </p>
                        </div>
                        <div>
                          <p className="text-gray-500 dark:text-gray-400">
                            Status
                          </p>
                          <p className="font-medium text-orange-600 dark:text-orange-400">
                            Under Investigation
                          </p>
                        </div>
                      </div>

                      <div className="mt-3 pt-3 border-t border-gray-200 dark:border-gray-600">
                        <p className="text-xs text-gray-600 dark:text-gray-400">
                          Impact: {Math.floor(Math.random() * 500) + 100} users
                          affected • Assigned to: Application Support Team •
                          Ticket: NSAP{String(Date.now()).slice(-6)}
                        </p>
                      </div>
                    </motion.div>
                  );
                }
              )}
            </div>

            {/* Application Status */}
            <div className="mt-8">
              <h4 className="text-lg font-semibold text-gray-900 dark:text-white flex items-center mb-4">
                <BarChart3 className="w-5 h-5 text-blue-600 mr-2" />
                Application Health Status
              </h4>

              <div className="bg-gray-50 dark:bg-gray-700 rounded-xl p-4">
                <div className="space-y-3">
                  {[
                    {
                      system: "Customer Portal",
                      status: "Critical",
                      uptime: "82%",
                      issues: "3 Active",
                    },
                    {
                      system: "Integration Platform",
                      status: "Warning",
                      uptime: "91%",
                      issues: "2 Active",
                    },
                    {
                      system: "Mobile Application",
                      status: "Healthy",
                      uptime: "98%",
                      issues: "0 Active",
                    },
                    {
                      system: "Web Services",
                      status: "Warning",
                      uptime: "89%",
                      issues: "1 Active",
                    },
                  ].map((system, index) => (
                    <div
                      key={index}
                      className="flex items-center justify-between py-2 border-b border-gray-200 dark:border-gray-600 last:border-b-0"
                    >
                      <div className="flex items-center space-x-3">
                        <div
                          className={`w-2 h-2 rounded-full ${
                            system.status === "Critical"
                              ? "bg-red-500"
                              : system.status === "Warning"
                              ? "bg-yellow-500"
                              : "bg-green-500"
                          }`}
                        ></div>
                        <span className="text-sm font-medium text-gray-900 dark:text-white">
                          {system.system}
                        </span>
                      </div>
                      <div className="text-right">
                        <p className="text-sm font-medium text-gray-900 dark:text-white">
                          {system.uptime} uptime
                        </p>
                        <p className="text-xs text-gray-500 dark:text-gray-400">
                          {system.issues}
                        </p>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Modal Footer */}
        <div className="p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50">
          <div className="flex justify-between items-center">
            <p className="text-sm text-gray-600 dark:text-gray-400">
              Last updated: {new Date().toLocaleTimeString()}
            </p>
            <div className="flex space-x-3">
              <button
                onClick={() => setShowModal(false)}
                className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </motion.div>
    </div>
  );
}

>>>components/dashboard/modals/NSAPDetailsModal.tsx
"use client";

import React from "react";
import { motion } from "motion/react";
import { X, Smartphone, Award, Users, Star } from "lucide-react";
import { EnterpriseData, BusinessUnitData } from "@/lib/dataLoader";
import { getIconFromName, getItemIcon } from "../../../app/dashboard/data";

interface NSAPDetailsModalProps {
  showModal: boolean;
  setShowModal: (show: boolean) => void;
  selectedEnterprise: EnterpriseData | null;
  hoveredBusinessUnitIndex: number | null;
  setHoveredBusinessUnitIndex: (index: number | null) => void;
  setSelectedBusinessUnit: (unit: BusinessUnitData | null) => void;
  setShowContactsModal: (show: boolean) => void;
}

export default function NSAPDetailsModal({
  showModal,
  setShowModal,
  selectedEnterprise,
  hoveredBusinessUnitIndex,
  setHoveredBusinessUnitIndex,
  setSelectedBusinessUnit,
  setShowContactsModal,
}: NSAPDetailsModalProps) {
  if (!showModal || !selectedEnterprise) {
    return null;
  }

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-white/10 dark:bg-gray-900/10">
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        transition={{ duration: 0.3 }}
        className="relative bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-6xl max-h-[90vh] overflow-hidden w-full mx-4 border border-white/20 dark:border-gray-700/50"
      >
        {/* Close Button */}
        <button
          onClick={() => setShowModal(false)}
          className="absolute top-4 right-4 z-10 bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-2 transition-all duration-200 backdrop-blur-sm"
        >
          <X className="w-6 h-6" />
        </button>

        {/* Modal Header */}
        <div
          className={`px-6 py-4 ${
            selectedEnterprise.color.startsWith("#")
              ? ""
              : `bg-gradient-to-r ${selectedEnterprise.color}`
          }`}
          style={
            selectedEnterprise.color.startsWith("#")
              ? { backgroundColor: selectedEnterprise.color }
              : {}
          }
        >
          <h3 className="text-2xl font-bold text-white flex items-center">
            {React.createElement(getIconFromName(selectedEnterprise.icon), {
              className: "w-8 h-8 mr-3",
            })}
            {selectedEnterprise.title} - Non-SAP Systems
          </h3>
          <p className="text-white/80 text-sm mt-1">
            Comprehensive Non-SAP system overview and application portfolio
          </p>
        </div>

        {/* Modal Content */}
        <div className="p-6 max-h-[70vh] overflow-y-auto">
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {selectedEnterprise.items.map(
              (item: BusinessUnitData, itemIndex: number) => {
                const ItemIcon = getItemIcon(item.name);

                return (
                  <motion.div
                    key={itemIndex}
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ duration: 0.3, delay: itemIndex * 0.05 }}
                    className="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 transition-all duration-300 group"
                  >
                    {/* Business Unit Header */}
                    <div className="flex items-center space-x-3 mb-4">
                      <div className="flex-shrink-0">
                        <ItemIcon className="w-6 h-6 text-gray-600 dark:text-gray-300 transition-colors duration-300" />
                      </div>
                      <h4 className="font-semibold text-gray-900 dark:text-white text-sm transition-colors duration-300">
                        {item.name}
                      </h4>
                    </div>

                    {/* Metrics Grid */}
                    <div className="grid grid-cols-2 gap-3">
                      <div
                        className="flex items-center space-x-2 relative"
                        onMouseEnter={() =>
                          setHoveredBusinessUnitIndex(itemIndex)
                        }
                        onMouseLeave={() => setHoveredBusinessUnitIndex(null)}
                      >
                        <Smartphone className="w-4 h-4 text-blue-600 dark:text-blue-400" />
                        <div>
                          <p className="text-xs text-gray-500 dark:text-gray-400">
                            Apps
                          </p>
                          <p className="text-sm font-bold text-gray-900 dark:text-white">
                            {item.apps}
                          </p>
                        </div>

                        {/* Apps Breakdown Tooltip for Business Units */}
                        {hoveredBusinessUnitIndex === itemIndex &&
                          item.apps > 0 && (
                            <motion.div
                              initial={{ opacity: 0, y: -10, scale: 0.9 }}
                              animate={{ opacity: 1, y: 0, scale: 1 }}
                              exit={{ opacity: 0, y: -10, scale: 0.9 }}
                              transition={{ duration: 0.2 }}
                              className="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg px-3 py-2 shadow-xl border border-gray-700 dark:border-gray-600 whitespace-nowrap"
                              style={{ zIndex: 9999 }}
                            >
                              <div className="space-y-1">
                                <div className="flex items-center gap-2">
                                  <Award className="w-3 h-3 text-purple-400" />
                                  <span>
                                    Platinum: {item.appBreakdown?.platinum || 0}
                                  </span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <Award className="w-3 h-3 text-yellow-400" />
                                  <span>
                                    Gold: {item.appBreakdown?.gold || 0}
                                  </span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <Award className="w-3 h-3 text-gray-300" />
                                  <span>
                                    Silver: {item.appBreakdown?.silver || 0}
                                  </span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <Award className="w-3 h-3 text-orange-400" />
                                  <span>
                                    Bronze: {item.appBreakdown?.bronze || 0}
                                  </span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <Award className="w-3 h-3 text-blue-400" />
                                  <span>
                                    Lead: {item.appBreakdown?.lead || 0}
                                  </span>
                                </div>
                              </div>
                              {/* Tooltip arrow */}
                              <div className="absolute bottom-full left-1/2 transform -translate-x-1/2">
                                <div className="border-4 border-transparent border-b-gray-900 dark:border-b-gray-700"></div>
                              </div>
                            </motion.div>
                          )}
                      </div>

                      <div
                        className="flex items-center space-x-2 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg p-1 transition-colors duration-200"
                        onClick={(e) => {
                          e.stopPropagation(); // Prevent triggering the parent click
                          setSelectedBusinessUnit(item);
                          setShowContactsModal(true);
                        }}
                      >
                        <Users className="w-4 h-4 text-blue-500 dark:text-blue-400" />
                        <div>
                          <p className="text-xs text-gray-500 dark:text-gray-400">
                            Contacts
                          </p>
                          <p className="text-sm font-bold text-blue-600 dark:text-blue-400">
                            View Team
                          </p>
                        </div>
                      </div>
                    </div>

                    {/* P1 - Full Width */}
                    <div className="mt-3 pt-3 border-t border-gray-200 dark:border-gray-600">
                      <div className="flex items-center justify-between">
                        <div className="flex items-center space-x-2">
                          <Star className="w-4 h-4 text-purple-600 dark:text-purple-400" />
                          <span className="text-xs text-gray-500 dark:text-gray-400">
                            P1 Issues
                          </span>
                        </div>
                        <div className="flex items-center space-x-2">
                          <span className="text-sm font-bold text-gray-900 dark:text-white">
                            {item.p1}
                          </span>
                          <span
                            className={`text-xs px-2 py-1 rounded-full ${
                              item.p1 > 2
                                ? "bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400"
                                : item.p1 > 0
                                ? "bg-yellow-100 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-400"
                                : "bg-green-100 text-green-600 dark:bg-green-900/20 dark:text-green-400"
                            }`}
                          >
                            {item.p1 > 2
                              ? "Critical"
                              : item.p1 > 0
                              ? "Monitor"
                              : "Good"}
                          </span>
                        </div>
                      </div>
                    </div>
                  </motion.div>
                );
              }
            )}
          </div>
        </div>
      </motion.div>
    </div>
  );
}

>>>components/dashboard/modals/SAPCriticalModal.tsx
"use client";

import React from "react";
import { motion } from "motion/react";
import { X, ServerCog, BarChart3 } from "lucide-react";
import { EnterpriseData } from "@/lib/dataLoader";

interface SAPCriticalModalProps {
  showModal: boolean;
  setShowModal: (show: boolean) => void;
  selectedEnterprise: EnterpriseData | null;
}

export default function SAPCriticalModal({
  showModal,
  setShowModal,
  selectedEnterprise,
}: SAPCriticalModalProps) {
  if (!showModal || !selectedEnterprise) {
    return null;
  }

  return (
    <div
      className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-white/10 dark:bg-gray-900/10"
      onClick={() => setShowModal(false)}
    >
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        transition={{ duration: 0.3 }}
        className="relative bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-5xl max-h-[90vh] overflow-hidden w-full mx-4 border border-white/20 dark:border-gray-700/50"
        onClick={(e) => e.stopPropagation()}
      >
        {/* Close Button */}
        <button
          onClick={() => setShowModal(false)}
          className="absolute top-4 right-4 z-50 bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-2 transition-all duration-200 backdrop-blur-sm shadow-lg"
          style={{ zIndex: 9999 }}
        >
          <X className="w-6 h-6" />
        </button>

        {/* Modal Header */}
        <div className="bg-gradient-to-r from-green-600 to-green-500 px-6 py-4 relative overflow-hidden">
          <div className="absolute inset-0 bg-gradient-to-r from-green-600/20 to-green-700/20"></div>
          <div className="relative z-10">
            <h3 className="text-2xl font-bold text-white flex items-center">
              <div className="relative mr-3">
                <ServerCog className="w-8 h-8" />
              </div>
              {selectedEnterprise.title} - SAP Critical Issues
            </h3>
            <p className="text-white/80 text-sm mt-1">
              Real-time SAP system critical issues and downtime monitoring
            </p>
          </div>
        </div>

        {/* Modal Content */}
        <div className="p-6 max-h-[70vh] overflow-y-auto">
          {/* Issues List */}
          <div className="space-y-4">
            <h4 className="text-lg font-semibold text-gray-900 dark:text-white flex items-center">
              <ServerCog className="w-5 h-5 text-green-600 mr-2" />
              Current SAP Critical Issues
            </h4>

            <div className="space-y-3">
              {/* Generate sample SAP issues */}
              {Array.from(
                {
                  length: Math.ceil(
                    selectedEnterprise.metrics.p1 *
                      (selectedEnterprise.id === "ag-trading"
                        ? 0.3
                        : selectedEnterprise.id === "food"
                        ? 0.2
                        : selectedEnterprise.id === "specialized"
                        ? 0.4
                        : 0.1)
                  ),
                },
                (_, i) => {
                  const sapIssueTypes = [
                    {
                      type: "SAP ECC Database Connection Lost",
                      system: "SAP ECC Production",
                      severity: "Critical",
                      duration: "1.8h",
                    },
                    {
                      type: "S/4HANA Finance Module Error",
                      system: "SAP S/4HANA",
                      severity: "High",
                      duration: "0.9h",
                    },
                    {
                      type: "SAP Basis System Overload",
                      system: "SAP Basis",
                      severity: "Critical",
                      duration: "2.3h",
                    },
                    {
                      type: "ABAP Runtime Error",
                      system: "SAP Application Server",
                      severity: "High",
                      duration: "1.1h",
                    },
                    {
                      type: "SAP Gateway Service Down",
                      system: "SAP Gateway",
                      severity: "Critical",
                      duration: "0.7h",
                    },
                  ];
                  const issue = sapIssueTypes[i % sapIssueTypes.length];

                  return (
                    <motion.div
                      key={i}
                      initial={{ opacity: 0, x: -20 }}
                      animate={{ opacity: 1, x: 0 }}
                      transition={{ duration: 0.3, delay: i * 0.1 }}
                      className="bg-white dark:bg-gray-700 rounded-xl p-4 border border-gray-200 dark:border-gray-600 hover:shadow-lg transition-all duration-200"
                    >
                      <div className="flex items-center justify-between mb-3">
                        <div className="flex items-center space-x-3">
                          <div
                            className={`w-3 h-3 rounded-full ${
                              issue.severity === "Critical"
                                ? "bg-red-500"
                                : "bg-orange-500"
                            }`}
                          ></div>
                          <h5 className="font-semibold text-gray-900 dark:text-white">
                            {issue.type}
                          </h5>
                          <span
                            className={`px-2 py-1 rounded-full text-xs font-medium ${
                              issue.severity === "Critical"
                                ? "bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400"
                                : "bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400"
                            }`}
                          >
                            {issue.severity}
                          </span>
                        </div>
                        <div className="text-right">
                          <p className="text-sm font-medium text-gray-900 dark:text-white">
                            Downtime: {issue.duration}
                          </p>
                          <p className="text-xs text-gray-500 dark:text-gray-400">
                            Started {(i + 1) * 25}m ago
                          </p>
                        </div>
                      </div>

                      <div className="grid grid-cols-2 gap-4 text-sm">
                        <div>
                          <p className="text-gray-500 dark:text-gray-400">
                            Affected System
                          </p>
                          <p className="font-medium text-gray-900 dark:text-white flex items-center">
                            <ServerCog className="w-4 h-4 text-green-600 mr-1" />
                            {issue.system}
                          </p>
                        </div>
                        <div>
                          <p className="text-gray-500 dark:text-gray-400">
                            Status
                          </p>
                          <p className="font-medium text-orange-600 dark:text-orange-400">
                            Under Investigation
                          </p>
                        </div>
                      </div>

                      <div className="mt-3 pt-3 border-t border-gray-200 dark:border-gray-600">
                        <p className="text-xs text-gray-600 dark:text-gray-400">
                          Impact: {Math.floor(Math.random() * 300) + 50} SAP
                          users affected • Assigned to: SAP Basis Team • Ticket:
                          SAP{String(Date.now()).slice(-6)}
                        </p>
                      </div>
                    </motion.div>
                  );
                }
              )}
            </div>

            {/* SAP System Status */}
            <div className="mt-8">
              <h4 className="text-lg font-semibold text-gray-900 dark:text-white flex items-center mb-4">
                <BarChart3 className="w-5 h-5 text-green-600 mr-2" />
                SAP System Health
              </h4>

              <div className="bg-gray-50 dark:bg-gray-700 rounded-xl p-4">
                <div className="space-y-3">
                  {[
                    {
                      system: "SAP ECC Production",
                      status: "Critical",
                      uptime: "87%",
                      issues: "2 Active",
                    },
                    {
                      system: "SAP S/4HANA",
                      status: "Warning",
                      uptime: "94%",
                      issues: "1 Active",
                    },
                    {
                      system: "SAP BW/4HANA",
                      status: "Healthy",
                      uptime: "99%",
                      issues: "0 Active",
                    },
                    {
                      system: "SAP Gateway",
                      status: "Critical",
                      uptime: "85%",
                      issues: "1 Active",
                    },
                  ].map((system, index) => (
                    <div
                      key={index}
                      className="flex items-center justify-between py-2 border-b border-gray-200 dark:border-gray-600 last:border-b-0"
                    >
                      <div className="flex items-center space-x-3">
                        <div
                          className={`w-2 h-2 rounded-full ${
                            system.status === "Critical"
                              ? "bg-red-500"
                              : system.status === "Warning"
                              ? "bg-yellow-500"
                              : "bg-green-500"
                          }`}
                        ></div>
                        <span className="text-sm font-medium text-gray-900 dark:text-white">
                          {system.system}
                        </span>
                      </div>
                      <div className="text-right">
                        <p className="text-sm font-medium text-gray-900 dark:text-white">
                          {system.uptime} uptime
                        </p>
                        <p className="text-xs text-gray-500 dark:text-gray-400">
                          {system.issues}
                        </p>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Modal Footer */}
        <div className="p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50">
          <div className="flex justify-between items-center">
            <p className="text-sm text-gray-600 dark:text-gray-400">
              Last updated: {new Date().toLocaleTimeString()}
            </p>
            <div className="flex space-x-3">
              <button
                onClick={() => setShowModal(false)}
                className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </motion.div>
    </div>
  );
}

>>>components/dashboard/modals/SAPModal.tsx
"use client";
import React from "react";
import { motion } from "motion/react";
import { X, ServerCog, Server, Cable } from "lucide-react";

interface SAPModalProps {
  showSAPModal: boolean;
  selectedSAPEnterprise: string;
  onClose: () => void;
}

export default function SAPModal({
  showSAPModal,
  selectedSAPEnterprise,
  onClose,
}: SAPModalProps) {
  if (
    !showSAPModal ||
    ![
      "Ag & Trading",
      "Food",
      "Specialized Portfolio",
      "Corporate Functions",
    ].includes(selectedSAPEnterprise)
  ) {
    return null;
  }

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-white/10 dark:bg-gray-900/10">
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        transition={{ duration: 0.3 }}
        className="relative bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-6xl max-h-[90vh] overflow-hidden w-full mx-4 border border-white/20 dark:border-gray-700/50"
      >
        {/* Close Button */}
        <button
          onClick={onClose}
          className="absolute top-4 right-4 z-10 bg-gray-800/20 hover:bg-gray-800/40 dark:bg-white/20 dark:hover:bg-white/40 text-gray-800 dark:text-white rounded-full p-2 transition-all duration-200 backdrop-blur-sm"
        >
          <X className="w-6 h-6" />
        </button>

        {/* Modal Header */}
        <div
          className={`px-6 py-4 ${
            selectedSAPEnterprise === "Ag & Trading"
              ? "bg-gradient-to-r from-[#00843d] to-emerald-600"
              : selectedSAPEnterprise === "Food"
              ? "bg-gradient-to-r from-[#01632d] to-emerald-600"
              : selectedSAPEnterprise === "Specialized Portfolio"
              ? "bg-gradient-to-r from-[#03441f] to-emerald-600"
              : "bg-gradient-to-r from-[#14688a] to-emerald-600"
          }`}
        >
          <h3 className="text-2xl font-bold text-white flex items-center">
            <ServerCog className="w-8 h-8 mr-3" />
            {selectedSAPEnterprise === "Ag & Trading"
              ? "Trade & Ag (CASC) - SAP Systems"
              : selectedSAPEnterprise === "Food"
              ? "Food - SAP Systems"
              : selectedSAPEnterprise === "Specialized Portfolio"
              ? "Specialized Portfolio - SAP Systems"
              : "Corporate Functions - SAP Systems"}
          </h3>
          <p className="text-white/80 text-sm mt-1">
            Comprehensive SAP system overview and application portfolio
          </p>
        </div>

        {/* Modal Content */}
        <div className="p-6 max-h-[70vh] overflow-y-auto">
          {selectedSAPEnterprise === "Ag & Trading" ? (
            <div className="space-y-8">
              {/* Primary Systems */}
              <div>
                <div className="flex items-center mb-4">
                  <div className="w-2 h-8 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full mr-3"></div>
                  <h4 className="text-xl font-bold text-gray-900 dark:text-white">
                    Primary Systems
                  </h4>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                  {[
                    {
                      name: "TCC",
                      description: "Trade Control Center",
                      status: "active",
                    },
                    {
                      name: "TCG",
                      description: "Trade Control Gateway",
                      status: "active",
                    },
                    {
                      name: "TCE",
                      description: "Trade Control Engine",
                      status: "active",
                    },
                    {
                      name: "Class**",
                      description: "Classification System",
                      status: "not-supported",
                    },
                    {
                      name: "Non-SAP ERP",
                      description: "Enterprise Resource Planning",
                      status: "active",
                    },
                    {
                      name: "cReport",
                      description: "Reporting Platform",
                      status: "active",
                    },
                    {
                      name: "IBM Cognos",
                      description: "Business Intelligence",
                      status: "active",
                    },
                    {
                      name: "SOT",
                      description: "Originacion and Trading System",
                      status: "active",
                    },
                    {
                      name: "SGC",
                      description: "Supply Grid Control",
                      status: "active",
                    },
                    {
                      name: "Sistema de Camiones",
                      description: "Truck Management System",
                      status: "active",
                    },
                    {
                      name: "SOE",
                      description: "System Operations Engine",
                      status: "active",
                    },
                    {
                      name: "SOVI",
                      description: "Supply Operations View Interface",
                      status: "active",
                    },
                    {
                      name: "XChg",
                      description: "Exchange Platform",
                      status: "active",
                    },
                  ].map((system, index) => (
                    <motion.div
                      key={index}
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ duration: 0.3, delay: index * 0.05 }}
                      className={`bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-4 border-l-4 ${
                        system.status === "not-supported"
                          ? "border-orange-400 bg-orange-50/50 dark:bg-orange-900/10"
                          : "border-green-400"
                      } transition-all duration-300 hover:shadow-md`}
                    >
                      <div className="flex items-start justify-between">
                        <div className="flex-1">
                          <div className="flex items-center gap-2 mb-1">
                            <h5 className="font-semibold text-gray-900 dark:text-white">
                              {system.name}
                            </h5>
                            {system.status === "not-supported" && (
                              <span className="px-2 py-1 text-xs bg-orange-200 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 rounded-full">
                                Not Supported
                              </span>
                            )}
                          </div>
                          <p className="text-sm text-gray-600 dark:text-gray-300">
                            {system.description}
                          </p>
                        </div>
                        <Server className="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 ml-2" />
                      </div>
                    </motion.div>
                  ))}
                </div>
              </div>

              {/* Secondary Systems */}
              <div>
                <div className="flex items-center mb-4">
                  <div className="w-2 h-8 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full mr-3"></div>
                  <h4 className="text-xl font-bold text-gray-900 dark:text-white">
                    Secondary Systems
                  </h4>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                  {[
                    {
                      name: "TC2 – PPM, TRM",
                      description:
                        "Project Portfolio Management, Trade Risk Management",
                      status: "active",
                    },
                    {
                      name: "TCR*",
                      description: "Trade Control Repository",
                      status: "not-live",
                    },
                    {
                      name: "MDG",
                      description: "Master Data Governance",
                      status: "active",
                    },
                    {
                      name: "GTS",
                      description: "Global Trade Services",
                      status: "active",
                    },
                    {
                      name: "RM(FSCM)",
                      description:
                        "Risk Management - Financial Supply Chain Management",
                      status: "active",
                    },
                    {
                      name: "JDE-E1**",
                      description: "JD Edwards EnterpriseOne",
                      status: "not-supported",
                    },
                  ].map((system, index) => (
                    <motion.div
                      key={index}
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ duration: 0.3, delay: index * 0.05 }}
                      className={`bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4 border-l-4 ${
                        system.status === "not-supported"
                          ? "border-orange-400 bg-orange-50/50 dark:bg-orange-900/10"
                          : system.status === "not-live"
                          ? "border-yellow-400 bg-yellow-50/50 dark:bg-yellow-900/10"
                          : "border-blue-400"
                      } transition-all duration-300 hover:shadow-md`}
                    >
                      <div className="flex items-start justify-between">
                        <div className="flex-1">
                          <div className="flex items-center gap-2 mb-1">
                            <h5 className="font-semibold text-gray-900 dark:text-white">
                              {system.name}
                            </h5>
                            {system.status === "not-supported" && (
                              <span className="px-2 py-1 text-xs bg-orange-200 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 rounded-full">
                                Not Supported
                              </span>
                            )}
                            {system.status === "not-live" && (
                              <span className="px-2 py-1 text-xs bg-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 rounded-full">
                                Not Live
                              </span>
                            )}
                          </div>
                          <p className="text-sm text-gray-600 dark:text-gray-300">
                            {system.description}
                          </p>
                        </div>
                        <Cable className="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2" />
                      </div>
                    </motion.div>
                  ))}
                </div>
              </div>
            </div>
          ) : selectedSAPEnterprise === "Food" ? (
            /* Food Enterprise Systems */
            <div className="space-y-8">
              {/* Food - Protein Section */}
              <div>
                <div className="flex items-center mb-6">
                  <div className="w-3 h-10 bg-gradient-to-b from-emerald-500 to-green-500 rounded-full mr-4"></div>
                  <h3 className="text-2xl font-bold text-gray-900 dark:text-white">
                    Food - Protein
                  </h3>
                </div>

                {/* Food Protein Primary Systems */}
                <div className="mb-6">
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-green-500 to-emerald-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Primary Systems
                    </h4>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[
                      {
                        name: "TCD",
                        description: "Trade Control Database",
                        status: "active",
                      },
                      {
                        name: "Non-SAP ERP",
                        description: "Enterprise Resource Planning",
                        status: "active",
                      },
                      {
                        name: "Xpertis/Impuls**",
                        description: "Expert System / Impulse Management",
                        status: "not-supported",
                      },
                      {
                        name: "XLGO (ecosystem)",
                        description: "Extended Logistics Gateway Operations",
                        status: "active",
                      },
                      {
                        name: "CBS Order Mgmt",
                        description:
                          "Customer Business Services Order Management",
                        status: "active",
                      },
                      {
                        name: "CRB CPS",
                        description:
                          "Customer Relationship Business Customer Processing System",
                        status: "active",
                      },
                      {
                        name: "COM Order Mgmt",
                        description: "Commercial Order Management",
                        status: "active",
                      },
                      {
                        name: "Prism",
                        description:
                          "Process Risk Information System Management",
                        status: "active",
                      },
                      {
                        name: "SAP Business One",
                        description: "Small Business ERP Solution",
                        status: "active",
                      },
                    ].map((system, index) => (
                      <motion.div
                        key={index}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.3, delay: index * 0.05 }}
                        className={`bg-gradient-to-br from-green-50 to-green-50 dark:from-green-900/20 dark:to-green-900/20 rounded-xl p-4 border-l-4 ${
                          system.status === "not-supported"
                            ? "border-green-400 bg-green-50/50 dark:bg-green-900/10"
                            : "border-green-400"
                        } transition-all duration-300 hover:shadow-md`}
                      >
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <h5 className="font-semibold text-gray-900 dark:text-white">
                                {system.name}
                              </h5>
                              {system.status === "not-supported" && (
                                <span className="px-2 py-1 text-xs bg-orange-200 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 rounded-full">
                                  Not Supported
                                </span>
                              )}
                            </div>
                            <p className="text-sm text-gray-600 dark:text-gray-300">
                              {system.description}
                            </p>
                          </div>
                          <Server className="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 ml-2" />
                        </div>
                      </motion.div>
                    ))}
                  </div>
                </div>

                {/* Food Protein Secondary Systems */}
                <div className="mb-8">
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-green-500 to-green-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Secondary Systems
                    </h4>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[
                      {
                        name: "TC2 – CFD, Eggs, Salt, PPMPPM",
                        description:
                          "Trade Control 2 - Consolidated Food Division, Project Portfolio Management",
                        status: "active",
                      },
                      {
                        name: "MDG",
                        description: "Master Data Governance",
                        status: "active",
                      },
                      {
                        name: "GTS",
                        description: "Global Trade Services",
                        status: "active",
                      },
                      {
                        name: "RM(FSCM)",
                        description:
                          "Risk Management - Financial Supply Chain Management",
                        status: "active",
                      },
                      {
                        name: "JDE-E1**",
                        description: "JD Edwards EnterpriseOne",
                        status: "not-supported",
                      },
                    ].map((system, index) => (
                      <motion.div
                        key={index}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.3, delay: index * 0.05 }}
                        className={`bg-gradient-to-br from-green-50 to-green-50 dark:from-green-900/20 dark:to-green-900/20 rounded-xl p-4 border-l-4 ${
                          system.status === "not-supported"
                            ? "border-green-400 bg-green-50/50 dark:bg-green-900/10"
                            : "border-green-400"
                        } transition-all duration-300 hover:shadow-md`}
                      >
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <h5 className="font-semibold text-gray-900 dark:text-white">
                                {system.name}
                              </h5>
                              {system.status === "not-supported" && (
                                <span className="px-2 py-1 text-xs bg-orange-200 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 rounded-full">
                                  Not Supported
                                </span>
                              )}
                            </div>
                            <p className="text-sm text-gray-600 dark:text-gray-300">
                              {system.description}
                            </p>
                          </div>
                          <Cable className="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 ml-2" />
                        </div>
                      </motion.div>
                    ))}
                  </div>
                </div>
              </div>

              {/* Food Solutions Section */}
              <div>
                <div className="flex items-center mb-6">
                  <div className="w-3 h-10 bg-gradient-to-b from-amber-500 to-yellow-500 rounded-full mr-4"></div>
                  <h3 className="text-2xl font-bold text-gray-900 dark:text-white">
                    Food Solutions
                  </h3>
                </div>

                {/* Food Solutions Primary Systems */}
                <div className="mb-6">
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-amber-500 to-yellow-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Primary Systems
                    </h4>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[
                      {
                        name: "TC2",
                        description: "Trade Control 2",
                        status: "active",
                      },
                      {
                        name: "Non-SAP ERP",
                        description: "Enterprise Resource Planning",
                        status: "active",
                      },
                      {
                        name: "King Dee",
                        description: "Chinese ERP System",
                        status: "active",
                      },
                      {
                        name: "Yongyou",
                        description: "Chinese Enterprise Management Software",
                        status: "active",
                      },
                      {
                        name: "Great Plains",
                        description: "Microsoft Dynamics GP",
                        status: "active",
                      },
                      {
                        name: "Aforce",
                        description: "Asian Force Management System",
                        status: "active",
                      },
                      {
                        name: "CMMP",
                        description: "Customer Marketing Management Platform",
                        status: "active",
                      },
                      {
                        name: "Exact Globe",
                        description: "European Business Software",
                        status: "active",
                      },
                      {
                        name: "HTWin",
                        description: "High Technology Windows System",
                        status: "active",
                      },
                      {
                        name: "Navision SMET",
                        description: "Microsoft Dynamics NAV Special Markets",
                        status: "active",
                      },
                      {
                        name: "Lisa",
                        description: "Logistics Information System Application",
                        status: "active",
                      },
                      {
                        name: "WAMS",
                        description: "Warehouse Activity Management System",
                        status: "active",
                      },
                    ].map((system, index) => (
                      <motion.div
                        key={index}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.3, delay: index * 0.05 }}
                        className="bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 rounded-xl p-4 border-l-4 border-amber-400 transition-all duration-300 hover:shadow-md"
                      >
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <h5 className="font-semibold text-gray-900 dark:text-white">
                                {system.name}
                              </h5>
                            </div>
                            <p className="text-sm text-gray-600 dark:text-gray-300">
                              {system.description}
                            </p>
                          </div>
                          <Server className="w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 ml-2" />
                        </div>
                      </motion.div>
                    ))}
                  </div>
                </div>

                {/* Food Solutions Secondary Systems */}
                <div>
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-amber-500 to-yellow-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Secondary Systems
                    </h4>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[
                      {
                        name: "TC1",
                        description: "Trade Control 1",
                        status: "active",
                      },
                      {
                        name: "TCR*",
                        description: "Trade Control Repository",
                        status: "not-live",
                      },
                      {
                        name: "MDG",
                        description: "Master Data Governance",
                        status: "active",
                      },
                      {
                        name: "GTS",
                        description: "Global Trade Services",
                        status: "active",
                      },
                      {
                        name: "RM(FSCM)",
                        description:
                          "Risk Management - Financial Supply Chain Management",
                        status: "active",
                      },
                      {
                        name: "JDE-E1**",
                        description: "JD Edwards EnterpriseOne",
                        status: "not-supported",
                      },
                    ].map((system, index) => (
                      <motion.div
                        key={index}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.3, delay: index * 0.05 }}
                        className={`bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 rounded-xl p-4 border-l-4 ${
                          system.status === "not-supported"
                            ? "border-orange-400 bg-orange-50/50 dark:bg-orange-900/10"
                            : system.status === "not-live"
                            ? "border-yellow-400 bg-yellow-50/50 dark:bg-yellow-900/10"
                            : "border-amber-400"
                        } transition-all duration-300 hover:shadow-md`}
                      >
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <h5 className="font-semibold text-gray-900 dark:text-white">
                                {system.name}
                              </h5>
                              {system.status === "not-supported" && (
                                <span className="px-2 py-1 text-xs bg-orange-200 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 rounded-full">
                                  Not Supported
                                </span>
                              )}
                              {system.status === "not-live" && (
                                <span className="px-2 py-1 text-xs bg-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 rounded-full">
                                  Not Live
                                </span>
                              )}
                            </div>
                            <p className="text-sm text-gray-600 dark:text-gray-300">
                              {system.description}
                            </p>
                          </div>
                          <Cable className="w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 ml-2" />
                        </div>
                      </motion.div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          ) : selectedSAPEnterprise === "Specialized Portfolio" ? (
            /* Specialized Portfolio Systems */
            <div className="space-y-8">
              {/* Specialized ANH Section */}
              <div>
                <div className="flex items-center mb-6">
                  <div className="w-3 h-10 bg-gradient-to-b from-emerald-600 to-emerald-500 rounded-full mr-4"></div>
                  <h3 className="text-2xl font-bold text-gray-900 dark:text-white">
                    Specialized ANH
                  </h3>
                </div>

                {/* Primary Systems */}
                <div className="mb-6">
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-emerald-600 to-emerald-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Primary Systems
                    </h4>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[
                      {
                        name: "TCA",
                        description: "Trade Control Advanced",
                        status: "active",
                      },
                      {
                        name: "TC1*",
                        description: "Trade Control 1",
                        status: "not-live",
                      },
                      {
                        name: "Non-SAP ERP",
                        description: "Enterprise Resource Planning",
                        status: "active",
                      },
                      {
                        name: "Shnoudi",
                        description: "Specialized Processing System",
                        status: "active",
                      },
                      {
                        name: "Stratech",
                        description: "Strategic Technology Platform",
                        status: "active",
                      },
                      {
                        name: "Microsoft Dynamics Navision",
                        description: "Enterprise Business Solution",
                        status: "active",
                      },
                      {
                        name: "NIS",
                        description: "Network Information System",
                        status: "active",
                      },
                      {
                        name: "Evidanza",
                        description: "Evidence Management Platform",
                        status: "active",
                      },
                      {
                        name: "CPN",
                        description: "Customer Portal Network",
                        status: "active",
                      },
                    ].map((system, index) => (
                      <motion.div
                        key={index}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.3, delay: index * 0.05 }}
                        className={`bg-gradient-to-br from-emerald-50 to-emerald-50 dark:from-emerald-900/20 dark:to-emerald-900/20 rounded-xl p-4 border-l-4 ${
                          system.status === "not-live"
                            ? "border-yellow-400 bg-yellow-50/50 dark:bg-yellow-900/10"
                            : "border-emerald-400"
                        } transition-all duration-300 hover:shadow-md`}
                      >
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <h5 className="font-semibold text-gray-900 dark:text-white">
                                {system.name}
                              </h5>
                              {system.status === "not-live" && (
                                <span className="px-2 py-1 text-xs bg-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 rounded-full">
                                  Not Live
                                </span>
                              )}
                            </div>
                            <p className="text-sm text-gray-600 dark:text-gray-300">
                              {system.description}
                            </p>
                          </div>
                          <Server className="w-5 h-5 text-emerald-600 dark:text-emerald-400 flex-shrink-0 ml-2" />
                        </div>
                      </motion.div>
                    ))}
                  </div>
                </div>

                {/* Secondary Systems */}
                <div>
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-indigo-500 to-blue-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Secondary Systems
                    </h4>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[
                      {
                        name: "TC2 – CBI De-Icing PPM",
                        description:
                          "Trade Control 2 - Central Business Intelligence De-Icing Project Portfolio Management",
                        status: "active",
                      },
                      {
                        name: "TCR*",
                        description: "Trade Control Repository",
                        status: "not-live",
                      },
                      {
                        name: "MDG",
                        description: "Master Data Governance",
                        status: "active",
                      },
                      {
                        name: "GTS",
                        description: "Global Trade Services",
                        status: "active",
                      },
                      {
                        name: "RM(FSCM)",
                        description:
                          "Risk Management - Financial Supply Chain Management",
                        status: "active",
                      },
                      {
                        name: "JDE-E1**",
                        description: "JD Edwards EnterpriseOne",
                        status: "not-supported",
                      },
                    ].map((system, index) => (
                      <motion.div
                        key={index}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.3, delay: index * 0.05 }}
                        className={`bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 rounded-xl p-4 border-l-4 ${
                          system.status === "not-supported"
                            ? "border-orange-400 bg-orange-50/50 dark:bg-orange-900/10"
                            : system.status === "not-live"
                            ? "border-yellow-400 bg-yellow-50/50 dark:bg-yellow-900/10"
                            : "border-indigo-400"
                        } transition-all duration-300 hover:shadow-md`}
                      >
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <h5 className="font-semibold text-gray-900 dark:text-white">
                                {system.name}
                              </h5>
                              {system.status === "not-supported" && (
                                <span className="px-2 py-1 text-xs bg-orange-200 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 rounded-full">
                                  Not Supported
                                </span>
                              )}
                              {system.status === "not-live" && (
                                <span className="px-2 py-1 text-xs bg-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 rounded-full">
                                  Not Live
                                </span>
                              )}
                            </div>
                            <p className="text-sm text-gray-600 dark:text-gray-300">
                              {system.description}
                            </p>
                          </div>
                          <Cable className="w-5 h-5 text-indigo-600 dark:text-indigo-400 flex-shrink-0 ml-2" />
                        </div>
                      </motion.div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          ) : (
            /* Corporate Functions Systems */
            <div className="space-y-8">
              {/* Functions - ERP Section */}
              <div>
                <div className="flex items-center mb-6">
                  <div className="w-3 h-10 bg-gradient-to-b from-blue-500 to-indigo-500 rounded-full mr-4"></div>
                  <h3 className="text-2xl font-bold text-gray-900 dark:text-white">
                    Functions - ERP
                  </h3>
                </div>

                {/* Primary Systems */}
                <div className="mb-6">
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-blue-500 to-indigo-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Primary Systems
                    </h4>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[
                      {
                        name: "TCF",
                        description: "Trade Control Functions",
                        status: "active",
                      },
                      {
                        name: "TCL",
                        description: "Trade Control Logistics",
                        status: "active",
                      },
                      {
                        name: "TCR*",
                        description: "Trade Control Repository",
                        status: "not-live",
                      },
                      {
                        name: "MDG",
                        description: "Master Data Governance",
                        status: "active",
                      },
                      {
                        name: "GTS",
                        description: "Global Trade Services",
                        status: "active",
                      },
                      {
                        name: "RM(FSCM)",
                        description:
                          "Risk Management - Financial Supply Chain Management",
                        status: "active",
                      },
                    ].map((system, index) => (
                      <motion.div
                        key={index}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.3, delay: index * 0.05 }}
                        className={`bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4 border-l-4 ${
                          system.status === "not-live"
                            ? "border-yellow-400 bg-yellow-50/50 dark:bg-yellow-900/10"
                            : "border-blue-400"
                        } transition-all duration-300 hover:shadow-md`}
                      >
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <h5 className="font-semibold text-gray-900 dark:text-white">
                                {system.name}
                              </h5>
                              {system.status === "not-live" && (
                                <span className="px-2 py-1 text-xs bg-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 rounded-full">
                                  Not Live
                                </span>
                              )}
                            </div>
                            <p className="text-sm text-gray-600 dark:text-gray-300">
                              {system.description}
                            </p>
                          </div>
                          <Server className="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2" />
                        </div>
                      </motion.div>
                    ))}
                  </div>
                </div>

                {/* Secondary Systems */}
                <div className="mb-8">
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-gray-500 to-slate-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Secondary Systems
                    </h4>
                  </div>

                  <div className="flex items-center justify-center py-8 text-gray-500 dark:text-gray-400">
                    <p className="text-sm italic">
                      No secondary systems available
                    </p>
                  </div>
                </div>
              </div>

              {/* Functions Section */}
              <div>
                <div className="flex items-center mb-6">
                  <div className="w-3 h-10 bg-gradient-to-b from-cyan-500 to-teal-500 rounded-full mr-4"></div>
                  <h3 className="text-2xl font-bold text-gray-900 dark:text-white">
                    Functions
                  </h3>
                </div>

                {/* Primary Systems */}
                <div className="mb-6">
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-cyan-500 to-teal-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Primary Systems
                    </h4>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[
                      {
                        name: "JDE-E1**",
                        description: "JD Edwards EnterpriseOne",
                        status: "not-supported",
                      },
                    ].map((system, index) => (
                      <motion.div
                        key={index}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.3, delay: index * 0.05 }}
                        className="bg-gradient-to-br from-cyan-50 to-teal-50 dark:from-cyan-900/20 dark:to-teal-900/20 rounded-xl p-4 border-l-4 border-orange-400 bg-orange-50/50 dark:bg-orange-900/10 transition-all duration-300 hover:shadow-md"
                      >
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <h5 className="font-semibold text-gray-900 dark:text-white">
                                {system.name}
                              </h5>
                              <span className="px-2 py-1 text-xs bg-orange-200 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 rounded-full">
                                Not Supported
                              </span>
                            </div>
                            <p className="text-sm text-gray-600 dark:text-gray-300">
                              {system.description}
                            </p>
                          </div>
                          <Server className="w-5 h-5 text-cyan-600 dark:text-cyan-400 flex-shrink-0 ml-2" />
                        </div>
                      </motion.div>
                    ))}
                  </div>
                </div>

                {/* Secondary Systems */}
                <div>
                  <div className="flex items-center mb-4">
                    <div className="w-2 h-6 bg-gradient-to-b from-gray-500 to-slate-500 rounded-full mr-3"></div>
                    <h4 className="text-lg font-bold text-gray-900 dark:text-white">
                      Secondary Systems
                    </h4>
                  </div>

                  <div className="flex items-center justify-center py-8 text-gray-500 dark:text-gray-400">
                    <p className="text-sm italic">
                      No secondary systems available
                    </p>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Footer Notes */}
          <div className="bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 border border-gray-200 dark:border-gray-600 mt-8">
            <h5 className="font-semibold text-gray-900 dark:text-white mb-2">
              System Notes
            </h5>
            <div className="space-y-1 text-sm text-gray-600 dark:text-gray-300">
              <p>
                <span className="font-medium">*</span> Not currently live in
                production
              </p>
              <p>
                <span className="font-medium">**</span> Not currently supported
                by Cognizant
              </p>
            </div>
          </div>
        </div>
      </motion.div>
    </div>
  );
}
